(function(d,r,e,S,p,R,c,E,l,y){"use strict";const{FormRow:f}=c.Forms;function m(t){let{plugin:n,forceUpdate:a}=t;const s=l.getSettings(n.id),i=e.NavigationNative.useNavigation();return e.React.createElement(f,{label:n.manifest.name,leading:e.React.createElement(f.Icon,{source:y.getAssetIDByName(n.manifest.vendetta?.icon??"ic_application_command_24px")}),trailing:f.Arrow,onPress:function(){return n.enabled?i.push("VendettaCustomPage",{title:n.manifest.name,render:s}):a()}})}const{FormSection:F,FormDivider:P}=c.Forms;function h(){E.useProxy(r.storage);const t=Object.keys(r.storage.pinnedPlugins),n=window.hasOwnProperty("enmity")||window.hasOwnProperty("Aliucord"),[,a]=e.React.useReducer(function(i){return~i},0);if(t.length===0)return null;const s=t.filter(function(i){return l.plugins[i]&&l.plugins[i].enabled}).map(function(i,o){return e.React.createElement(e.React.Fragment,null,e.React.createElement(m,{plugin:l.plugins[i],forceUpdate:a}),o!==t.length-1&&e.React.createElement(P,null))});return r.storage.appendExisting?e.React.createElement(c.ErrorBoundary,null,s):e.React.createElement(c.ErrorBoundary,null,e.React.createElement(F,{key:"PinSettingsPlugins",title:`${n?"Vendetta ":""}Plugins`},s))}const I=S.findByName("UserSettingsOverviewWrapper",!1);function b(){const t=new Array,n=p.after("default",I,function(a,s){const i=R.findInReactTree(s.props.children,function(o){return o.type&&o.type.name==="UserSettingsOverview"});t.push(p.after("render",i.type.prototype,function(o,M){let{props:{children:u}}=M;const V=[e.i18n.Messages.BILLING_SETTINGS,e.i18n.Messages.PREMIUM_SETTINGS];u=R.findInReactTree(u,function(g){return g.children[1].type===c.Forms.FormSection}).children;const w=u.findIndex(function(g){return V.includes(g?.props.label)});u.splice(w===-1?4:w,0,React.createElement(h,null))})),n()});return function(){return t.forEach(function(a){return a()})}}const{FormRow:N,FormRadioRow:x}=c.Forms;function _(t){let{name:n,id:a}=t;const s=r.storage.pinnedPlugins[a];return React.createElement(x,{label:n,trailing:N.Arrow,selected:s,onPress:function(){s?delete r.storage.pinnedPlugins[a]:r.storage.pinnedPlugins[a]=!0}})}const{FormRow:A,FormSection:v,FormSwitchRow:B,FormDivider:O}=c.Forms;function T(){return E.useProxy(r.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},e.React.createElement(v,{title:"Options",titleStyleType:"no_border"},e.React.createElement(B,{label:"Append to Vendetta section",subLabel:"May be incompatible with other client mods.",leading:e.React.createElement(A.Icon,{source:y.getAssetIDByName("ic_edit_24px")}),value:r.storage.appendExisting,onValueChange:function(t){r.storage.appendExisting=t}})),e.React.createElement(v,{title:"Plugins"},e.React.createElement(e.ReactNative.FlatList,{data:Object.values(l.plugins).filter(function(t){return l.getSettings(t.id)}),ItemSeparatorComponent:O,renderItem:function(t){let{item:n}=t;return e.React.createElement(_,{name:n.manifest.name,id:n.id})}})))}r.storage.pinnedPlugins??={},r.storage.appendExisting??=!1;const U=[b()],$=function(){return U.forEach(function(t){return t()})};return d.onUnload=$,d.settings=T,d})({},vendetta.plugin,vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.ui.components,vendetta.storage,vendetta.plugins,vendetta.ui.assets);
