(function(m,l,f){"use strict";const a=[],{getCustomEmojiById:y}=l.findByStoreName("EmojiStore"),p=l.findByName("RowManager"),c=/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/;a.push(f.before("generate",p.prototype,([n])=>{if(n.rowType!==1)return;let e=n.message.content;if(!e?.length)return;const r=e.match(c)?.index;if(r===void 0)return;const s=e.slice(r).trim().split(`
`);if(!s.every(o=>o.match(c)))return;for(e=e.slice(0,r);e.indexOf("  ")!==-1;)e=e.replace("  ",` ${s.shift()} `);e=e.trim(),s.length&&(e+=` ${s.join(" ")}`);const t=n.message.embeds;for(let o=0;o<t.length;o++){const i=t[o];i.type==="image"&&i.url.match(c)&&t.splice(o--,1)}n.message.content=e,n.__realmoji=!0})),a.push(f.after("generate",p.prototype,([n],e)=>{if(n.rowType!==1||n.__realmoji!==!0)return;const{content:r}=e.message;if(!Array.isArray(r))return;const s=r.every(t=>t.type==="link"&&t.target.match(c)||t.type==="text"&&t.content===" ");for(let t=0;t<r.length;t++){const o=r[t];if(o.type!=="link")continue;const i=o.target.match(c);if(!i)continue;const u=`${i[0]}?size=128`,g=y(i[1]);r[t]={type:"customEmoji",id:i[1],alt:g?.name??"<realmoji>",src:u.replace("gif","webp"),frozenSrc:u,jumboable:s}}}));const d=()=>a.forEach(n=>n());return m.onUnload=d,m})({},vendetta.metro,vendetta.patcher);
