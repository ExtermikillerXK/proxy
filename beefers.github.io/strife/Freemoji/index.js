(function(r,n,t,o,m,f,g){"use strict";const c=t.findByProps("canUseEmojisEverywhere");var v=[o.instead("canUseEmojisEverywhere",c,function(){return!0}),o.instead("canUseAnimatedEmojis",c,function(){return!0})];const{getCustomEmojiById:E}=t.findByStoreName("EmojiStore"),{getGuildId:j}=t.findByStoreName("SelectedGuildStore"),S=/<a?:(\w+):(\d+)>/i;function y(e,s){const i=e.matchAll(/<a?:(\w+):(\d+)>/gi),u=[];for(const l of i){const a=E(l[2]);(a.guildId!=j()||a.animated)&&(e=e.replace(l[0],""),u.push(`${a.url.split("?")[0]}?size=${s}`))}return{newContent:e.trim(),extractedEmojis:u}}function d(e){if(!e.content.match(S))return;const{newContent:s,extractedEmojis:i}=y(e.content,n.storage.emojiSize);e.content=s,i.length>0&&(e.content+=`
`+i.join(`
`)),e.invalidEmojis=[]}const h=t.findByProps("sendMessage","receiveMessage"),w=t.findByProps("uploadLocalFiles");var B=[o.before("sendMessage",h,function(e){return d(e[1])}),o.before("uploadLocalFiles",w,function(e){return d(e[0].parsedMessage)})];const{FormInput:I}=f.Forms;function b(){return g.useProxy(n.storage),React.createElement(m.ReactNative.ScrollView,null,React.createElement(I,{title:"EMOJI SIZE (must be divisible by 16)",placeholder:"64",value:n.storage.emojiSize,onChange:function(e){return n.storage.emojiSize=e}}))}n.storage.emojiSize??="64";const p=[...v,...B],z=function(){return p.forEach(function(e){return e()})};return r.onUnload=z,r.settings=b,r})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage);
