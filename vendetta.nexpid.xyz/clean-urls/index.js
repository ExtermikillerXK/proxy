(function(s,b,h,m){"use strict";const y=["action_object_map","action_type_map","action_ref_map","spm@*.aliexpress.com","scm@*.aliexpress.com","aff_platform","aff_trace_key","algo_expid@*.aliexpress.*","algo_pvid@*.aliexpress.*","btsid","ws_ab_test","pd_rd_*@amazon.*","_encoding@amazon.*","psc@amazon.*","tag@amazon.*","ref_@amazon.*","pf_rd_*@amazon.*","pf@amazon.*","crid@amazon.*","keywords@amazon.*","sprefix@amazon.*","sr@amazon.*","ie@amazon.*","node@amazon.*","qid@amazon.*","callback@bilibili.com","cvid@bing.com","form@bing.com","sk@bing.com","sp@bing.com","sc@bing.com","qs@bing.com","pq@bing.com","sc_cid","mkt_tok","trk","trkCampaign","ga_*","gclid","gclsrc","hmb_campaign","hmb_medium","hmb_source","spReportId","spJobID","spUserID","spMailingID","itm_*","s_cid","elqTrackId","elqTrack","assetType","assetId","recipientId","campaignId","siteId","mc_cid","mc_eid","pk_*","sc_campaign","sc_channel","sc_content","sc_medium","sc_outcome","sc_geo","sc_country","nr_email_referer","vero_conv","vero_id","yclid","_openstat","mbid","cmpid","cid","c_id","campaign_id","Campaign","hash@ebay.*","fb_action_ids","fb_action_types","fb_ref","fb_source","fbclid","refsrc@facebook.com","hrc@facebook.com","gs_l","gs_lcp@google.*","ved@google.*","ei@google.*","sei@google.*","gws_rd@google.*","gs_gbg@google.*","gs_mss@google.*","gs_rn@google.*","_hsenc","_hsmi","__hssc","__hstc","hsCtaTracking","source@sourceforge.net","position@sourceforge.net","t@*.twitter.com","s@*.twitter.com","ref_*@*.twitter.com","tt_medium","tt_content","lr@yandex.*","redircnt@yandex.*","feature@youtube.com","kw@youtube.com","si@youtube.com","pp@youtube.com","si@youtu.be","wt_zmc","utm_source","utm_content","utm_medium","utm_campaign","utm_term","si@open.spotify.com","igshid","share_id@reddit.com"],k=["ex@cdn.discordapp.com","is@cdn.discordapp.com","hm@cdn.discordapp.com","ex@media.discordapp.net","is@media.discordapp.net","hm@media.discordapp.net","shareKey@coolapk.com","shareUid@coolapk.com","shareFrom@coolapk.com","si@spotify.link"],w=/[\\^$.*+?()[\]{}|]/g,d=function(e){return e.replace(w,"\\$&")},_=new Array,a={},p={};for(const e of[...y,...k]){const[o,n]=e.split("@"),r=new RegExp(`^${d(o).replace(/\*/g,".+?")}$`);if(!n){_.push(r);continue}const t=new RegExp(`^(?:www\\.)?${d(n).replace(/\*\./g,"(?:.+?\\.)?").replace(/\*/g,".+?")}$`),c=t.toString();p[c]=t,a[c]??(a[c]=[]),a[c].push(r)}var i={universal:_,byHost:a,hostMap:p};const u=h.findByProps("sendMessage","editMessage"),z=function(e){return e.replace(b.HTTP_REGEX_MULTI,function(o){let n;try{n=new URL(o)}catch{return o}const r=Object.entries(i.byHost).find(function(t){return i.hostMap[t[0]]?.test(n.hostname)})?.[1]??[];for(const t of[...i.universal,...r])n.searchParams.forEach(function(c,l){return t.test(l)&&n.searchParams.delete(l)});return n.toString()})},g=function(e){e.content=z(e.content)};function v(){const e=new Array;return m.before("sendMessage",u,function(o){return g(o[1])}),m.before("editMessage",u,function(o){return g(o[2])}),function(){return e.forEach(function(o){return o()})}}let f;var x={onLoad:function(){return f=v()},onUnload:function(){return f?.()}};return s.default=x,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.constants,vendetta.metro,vendetta.patcher);
