(function(c,v,l,i,S,u,C,m,G,F,g,ge,y,H,L){"use strict";var d;(function(t){t[t.Folder=0]="Folder",t[t.Guild=1]="Guild"})(d||(d={}));function x(t){let{ret:o}=t;m.useProxy(f);const r=H.findInReactTree(o,function(e){return e?.type?.name==="Guilds"})?.props;if(!r)return;const a={guilds:[],folders:[]};for(const e of r.guildFolders)if(s(d.Folder,e.folderId)){a.folders.push(e.folderId);for(const n of e.guildIds)a.guilds.push(n)}else for(const n of e.guildIds.filter(function(R){return s(d.Guild,R)}))a.guilds.push(n);for(const e of a.guilds)r.unreadGuilds.delete(e),delete r.guildReadStates[e];return r.guildFolders=r.guildFolders.filter(function(e){return e.folderId?!s(d.Folder,e.folderId):!0}).map(function(e){return{...e,guildIds:e.guildIds.filter(function(n){return!s(d.Guild,n)})}}),o}const{default:M}=l.find(function(t){return t?.default?.render?.name==="GuildPopoutMenu"}),{default:$}=l.find(function(t){return t?.default?.render?.name==="FolderPopoutMenu"}),z=l.findByName("GuildsConnected",!1);function O(){const t=new Array;return t.push(S.after("render",M,function(o,r){let[{guildId:a,title:e}]=o;const n={...r};return s(d.Guild,a)||n.props.rows.unshift({text:"Hide Server",icon:u.getAssetIDByName("ic_hide_password"),onClick:function(){E(d.Guild,a),C.showToast(`Hid ${e}`,u.getAssetIDByName("ic_hide_password"))}}),n})),t.push(S.after("render",$,function(o,r){let[{title:a,folderId:e}]=o;const n={...r};return s(d.Folder,e)||n.props.rows.unshift({text:"Hide Folder",icon:u.getAssetIDByName("ic_hide_password"),onClick:function(){E(d.Folder,e),C.showToast(`Hid ${a}`,u.getAssetIDByName("ic_hide_password"))}}),n})),t.push(S.after("default",z,function(o,r){return i.React.createElement(x,{ret:r})})),function(){return t.forEach(function(o){return o()})}}const V=l.findByStoreName("ThemeStore"),k=l.findByProps("colors","meta");l.findByProps("triggerHaptic");const{TextStyleSheet:U}=l.findByProps("TextStyleSheet"),{View:p,Text:P,Pressable:Y}=g.General;l.findByProps("ActionSheet")?.ActionSheet??l.find(function(t){return t.render?.name==="ActionSheet"});const{openLazy:he,hideActionSheet:j}=l.findByProps("openLazy","hideActionSheet");l.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer"),l.findByProps("ActionSheetRow")?.ActionSheetRow,l.findByName("Navigator"),l.findByProps("getRenderCloseButton"),l.findByProps("popModal","pushModal");function X(t){return k.meta.resolveSemanticColor(V.theme,t)}function K(t){let{title:o,onPress:r,icon:a}=t;const e=i.stylesheet.createThemedStyleSheet({androidRipple:{color:y.semanticColors.ANDROID_RIPPLE},icon:{height:18,tintColor:y.semanticColors.HEADER_SECONDARY,opacity:.5}}),n=r?Y:p;return i.React.createElement(n,{android_ripple:e.androidRipple,disabled:!1,accessibilityRole:"button",onPress:r,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},a&&i.React.createElement(p,{style:{marginRight:4}},i.React.createElement(i.ReactNative.Image,{style:e.icon,source:a,resizeMode:"contain"})),i.React.createElement(I,{variant:"text-sm/semibold",color:"HEADER_SECONDARY"},o))}function W(t){let{title:o,onTitlePress:r,icon:a,children:e,padding:n}=t;const R=i.stylesheet.createThemedStyleSheet({main:{backgroundColor:y.semanticColors.REDESIGN_ACTIVITY_CARD_BACKGROUND,borderRadius:16,overflow:"hidden",flex:1}});return i.React.createElement(p,{style:{marginHorizontal:16,marginTop:16}},i.React.createElement(K,{title:o,onPress:r,icon:a}),i.React.createElement(p,{style:R.main},n?i.React.createElement(p,{style:{paddingHorizontal:16,paddingVertical:16}},e):e))}var B;(function(t){function o(a){let{children:e,onPress:n}=a;return i.React.createElement(I,{variant:"text-md/bold",onPress:n},e)}t.Bold=o;function r(a){let{children:e,onPress:n}=a;return i.React.createElement(P,{style:{textDecorationLine:"underline"},onPress:n},e)}t.Underline=r})(B||(B={}));function I(t){let{variant:o,lineClamp:r,color:a,align:e,style:n,onPress:R,getChildren:ce,children:ue,liveUpdate:fe}=t;const[ye,D]=i.React.useReducer(function(w){return~w},0);return i.React.useEffect(function(){if(!fe)return;const w=new Date().setMilliseconds(1e3);let N,b;return b=setTimeout(function(){D(),N=setInterval(D,1e3)},w-Date.now()),function(){clearTimeout(b),clearInterval(N)}},[]),i.React.createElement(P,{style:[o?U[o]:{},a?{color:X(y.semanticColors[a])}:{},e?{textAlign:e}:{},n??{}],numberOfLines:r,onPress:R},ce?.()??ue)}const{View:q}=g.General,{FormRow:J}=g.Forms,{showSimpleActionSheet:Q}=l.findByProps("showSimpleActionSheet"),Z=l.findByStoreName("SortedGuildStore"),ee=l.findByStoreName("GuildStore"),te="#5865f2",ne=function(){m.useProxy(f);const[t,o]=i.React.useState(""),r=ee.getGuilds(),a=Z.getGuildFolders().filter(function(e){return e.folderId?s(d.Folder,e.folderId):e.guildIds.every(function(n){return s(d.Guild,n)})}).map(function(e){const n=e.folderId?e:r[e.guildIds[0]];if(n)return{id:n.folderId??n.id,name:n.folderName??n.name,icon:n.icon,color:n.folderId&&(n.folderColor?i.ReactNative.processColor(n.folderColor):te),type:n.folderId?d.Folder:d.Guild}}).filter(function(e){return e?.name.toLowerCase().includes(t)});return i.React.createElement(i.ReactNative.FlatList,{ListHeaderComponent:i.React.createElement(g.Search,{style:{marginBottom:10},onChangeText:function(e){return o(e.toLowerCase())}}),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:a,renderItem:function(e){let{item:n}=e;return i.React.createElement(J,{label:n.name,leading:n.icon?i.React.createElement(i.ReactNative.Image,{source:{uri:`https://cdn.discordapp.com/icons/${n.id}/${n.icon}.${n.icon.startsWith("a_")?"gif":"png"}?size=32`},style:{height:32,width:32,borderRadius:16}}):i.React.createElement(q,{style:{height:32,width:32,borderRadius:8,backgroundColor:n.color}}),onPress:function(){return Q({key:"CardOverflow",header:{title:n.name,onClose:j},options:[{label:"Remove",icon:u.getAssetIDByName("ic_message_delete"),isDestructive:!0,onPress:function(){C.showToast(`Removed ${n.name} from hidden list`,u.getAssetIDByName("ic_hide_password")),_(n.type,n.id)}}]})}})},removeClippedSubviews:!0})};function re(t){t.push("VendettaCustomPage",{title:"Manage Data",render:ne})}const{ScrollView:ie}=g.General,{FormRow:h}=g.Forms,oe=i.stylesheet.createThemedStyleSheet({destructiveIcon:{tintColor:y.semanticColors.TEXT_DANGER}}),ae={color:"TEXT_DANGER",variant:"text-md/semibold"};function le(){const t=i.NavigationNative.useNavigation();return React.createElement(ie,null,React.createElement(W,{title:"Data",icon:u.getAssetIDByName("ic_cog_24px")},React.createElement(h,{label:React.createElement(I,ae,"Clear data"),leading:React.createElement(h.Icon,{style:oe.destructiveIcon,source:u.getAssetIDByName("ic_message_delete")}),trailing:React.createElement(h.Arrow,null),onPress:function(){return L.showConfirmationAlert({title:"Clear data",content:"Are you sure you want to clear all local hidden server data?",confirmText:"Clear",confirmColor:"red",onConfirm:function(){v.storage.hiddenList={list:[]}},isDismissable:!0})}}),React.createElement(h,{label:"Manage data",leading:React.createElement(h.Icon,{source:u.getAssetIDByName("ic_message_edit")}),trailing:React.createElement(h.Arrow,null),onPress:function(){return re(t)}})))}const f=m.wrapSync(m.createStorage({get:function(){return v.storage.hidden??{list:[]}},set:function(t){v.storage.hidden=t}}));function s(t,o){return f.list.some(function(r){return r[0]===t&&r[1]===o})}function E(t,o){s(t,o)||(f.list=[...f.list,t===d.Folder?[t,o]:[t,o]])}function _(t,o){f.list=f.list.filter(function(r){return r[0]!==t||r[1]!==o})}const A=Symbol.for("vendetta.storage.emitter"),de=!!G.plugins[A]&&!!F.themes[A];let T;var se={onLoad:function(){return T=O()},onUnload:function(){return T?.()},settings:le};return c.addHidden=E,c.default=se,c.emitterAvailable=de,c.emitterSymbol=A,c.hiddenList=f,c.isHidden=s,c.removeHidden=_,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.storage,vendetta.plugins,vendetta.themes,vendetta.ui.components,vendetta,vendetta.ui,vendetta.utils,vendetta.ui.alerts);
