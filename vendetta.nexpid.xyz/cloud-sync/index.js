(function(w,X,N,c,m,C,E,s,J,t,h,A,v,K,Be,_e,$e){"use strict";const Oe=c.findByStoreName("ThemeStore"),xe=c.findByProps("colors","meta"),{TextStyleSheet:Le}=c.findByProps("TextStyleSheet"),{View:D,Text:oe,Pressable:Me}=h.General,se=c.find(function(e){return e.render?.name==="ActionSheet"}),{openLazy:Ue,hideActionSheet:ce}=c.findByProps("openLazy","hideActionSheet"),{ActionSheetTitleHeader:Ge,ActionSheetCloseButton:ke,ActionSheetContentContainer:Ve}=c.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer");c.findByName("Navigator"),c.findByProps("getRenderCloseButton"),c.findByProps("popModal","pushModal");function je(e){return xe.meta.resolveSemanticColor(Oe.theme,e)}function le(e,i){se?Ue(new Promise(function(n){return n({default:e})}),"ActionSheet",i):E.showToast("You cannot open ActionSheets on this version! Update to 163+",s.getAssetIDByName("Small"))}function Fe(e){let{title:i,onPress:n,icon:r}=e;const o=t.stylesheet.createThemedStyleSheet({androidRipple:{color:v.semanticColors.ANDROID_RIPPLE},icon:{height:18,tintColor:v.semanticColors.HEADER_SECONDARY,opacity:.5}}),a=n?Me:D;return t.React.createElement(a,{android_ripple:o.androidRipple,disabled:!1,accessibilityRole:"button",onPress:n,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},r&&t.React.createElement(D,{style:{marginRight:4}},t.React.createElement(t.ReactNative.Image,{style:o.icon,source:r,resizeMode:"contain"})),t.React.createElement(F,{variant:"text-sm/semibold",color:"HEADER_SECONDARY"},i))}function j(e){let{title:i,onTitlePress:n,icon:r,children:o,padding:a}=e;const u=t.stylesheet.createThemedStyleSheet({main:{backgroundColor:v.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return t.React.createElement(D,{style:{marginHorizontal:16,marginTop:16}},t.React.createElement(Fe,{title:i,onPress:n,icon:r}),t.React.createElement(D,{style:u.main},a?t.React.createElement(D,{style:{paddingHorizontal:16,paddingVertical:16}},o):o))}function ze(e){let{addPadding:i}=e;const n=t.stylesheet.createThemedStyleSheet({line:{width:"100%",height:2,backgroundColor:v.semanticColors.BACKGROUND_ACCENT,borderRadius:2147483647}});return t.React.createElement(D,{style:[{marginTop:16,marginBottom:16},i&&{marginHorizontal:16}]},t.React.createElement(D,{style:n.line}))}var ue;(function(e){function i(r){let{children:o,onPress:a}=r;return t.React.createElement(F,{variant:"text-md/bold",onPress:a},o)}e.Bold=i;function n(r){let{children:o,onPress:a}=r;return t.React.createElement(oe,{style:{textDecorationLine:"underline"},onPress:a},o)}e.Underline=n})(ue||(ue={}));function F(e){let{variant:i,lineClamp:n,color:r,align:o,style:a,onPress:u,getChildren:S,children:d,liveUpdate:I}=e;const[_,R]=t.React.useReducer(function(y){return~y},0);return t.React.useEffect(function(){if(!I)return;const y=new Date().setMilliseconds(1e3);let f,b;return b=setTimeout(function(){R(),f=setInterval(R,1e3)},y-Date.now()),function(){clearTimeout(b),clearInterval(f)}},[]),t.React.createElement(oe,{style:[i?Le[i]:{},r?{color:je(v.semanticColors[r])}:{},o?{textAlign:o}:{},a??{}],numberOfLines:n,onPress:u},S?.()??d)}function de(e){let{onPress:i,onLongPress:n,icon:r,style:o,destructive:a}=e;const u=t.stylesheet.createThemedStyleSheet({headerStyleIcon:{width:24,height:24,marginRight:10,tintColor:v.semanticColors.HEADER_PRIMARY},cardStyleIcon:{width:22,height:22,marginLeft:5,tintColor:v.semanticColors.INTERACTIVE_NORMAL},destructiveIcon:{tintColor:v.semanticColors.TEXT_DANGER}});return t.React.createElement(t.ReactNative.TouchableOpacity,{onPress:i,onLongPress:n},t.React.createElement(t.ReactNative.Image,{style:[typeof o=="string"?o==="header"?u.headerStyleIcon:u.cardStyleIcon:o,a&&u.destructiveIcon].filter(function(S){return!!S}),source:r}))}const{View:He,Text:fe}=h.General,{TextStyleSheet:ge}=c.findByProps("TextStyleSheet"),ye=t.stylesheet.createThemedStyleSheet({count:{...ge["text-lg/bold"],color:v.semanticColors.TEXT_NORMAL,textAlign:"center"},subtitle:{...ge["text-md/medium"],color:v.semanticColors.TEXT_MUTED,textAlign:"center"}});function he(e){let{subtitle:i,count:n,contents:r}=e;return React.createElement(He,{style:{alignItems:"center",justifyContent:"center",marginHorizontal:16}},React.createElement(fe,{style:ye.count},n),React.createElement(fe,{style:ye.subtitle},i))}const pe="https://cloudsync.nexpid.xyz/";var B={api:pe,oauth2:{clientId:"1120793656878714913",redirectURL:`${pe}api/oauth2-response`}};function Ye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function z(e,i,n){return Se()?z=Reflect.construct:z=function(r,o,a){var u=[null];u.push.apply(u,o);var S=Function.bind.apply(r,u),d=new S;return a&&M(d,a.prototype),d},z.apply(null,arguments)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},L(e)}function Je(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i&&M(e,i)}function Ke(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function We(e,i){return i&&(qe(i)==="object"||typeof i=="function")?i:Ye(e)}function M(e,i){return M=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},M(e,i)}function qe(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function W(e){var i=typeof Map=="function"?new Map:void 0;return W=function(n){if(n===null||!Ke(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i<"u"){if(i.has(n))return i.get(n);i.set(n,r)}function r(){return z(n,arguments,L(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),M(r,n)},W(e)}function Se(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qe(e){var i=Se();return function(){var n=L(e),r;if(i){var o=L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return We(this,r)}}const Re=c.findByStoreName("UserStore");let U=function(e){Je(n,e);var i=Qe(n);function n(r){Xe(this,n);var o;return o=i.call(this,`${r.status}: ${r.message}${r.error?` (${r.error})`:""}`),o.name=o.constructor.name,o}return n}(W(Error));function T(){return l.auth?.[Re.getCurrentUser().id]}async function q(){const e=new Error("Unauthorized, try logging out and back in again");let i=T();if(!i)throw e;if(Date.now()>=i.expiresAt){const n=await fetch(`${B.api}api/refresh-access-token?refresh_token=${encodeURIComponent(i.refreshToken)}`);if(n.status!==200)throw new U(await n.json());i=await n.json(),l.auth??={},l.auth[Re.getCurrentUser().id]=i}return i.accessToken}async function Ze(e){const i=await fetch(`${B.api}api/get-access-token?code=${encodeURIComponent(e)}`);if(i.status===200)return await i.json();throw new U(await i.json())}async function et(){if(!T())return;const e=await fetch(`${B.api}api/get-data`,{headers:{authorization:await q()}});if(e.status===200)return await e.json();throw new U(await e.json())}async function Ee(e){if(!T())return;const i=await fetch(`${B.api}api/sync-data`,{method:"POST",headers:{authorization:await q(),"content-type":"application/json"},body:JSON.stringify(e)});if(i.status===200)return await i.json();throw new U(await i.json())}async function tt(){if(!T())return;const e=await fetch(`${B.api}api/delete-data`,{method:"DELETE",headers:{authorization:await q()}});if(e.status===200)return await e.json();throw new U(await e.json())}const{pushModal:nt,popModal:it}=c.findByProps("pushModal","popModal"),rt=c.findByName("OAuth2AuthorizeModal"),at=c.findByStoreName("UserStore");function ot(){nt({key:"oauth2-authorize",modal:{key:"oauth2-authorize",modal:rt,animation:"slide-up",shouldPersistUnderModals:!1,props:{clientId:B.oauth2.clientId,redirectUri:B.oauth2.redirectURL,scopes:["identify"],responseType:"code",permissions:0n,cancelCompletesFlow:!1,callback:async function(e){let{location:i}=e;try{const n=new URL(i).searchParams.get("code"),r=await Ze(n);l.auth??={},l.auth[at.getCurrentUser().id]=r,te(),E.showToast("Successfully authenticated",s.getAssetIDByName("Check"))}catch(n){E.showToast(String(n),s.getAssetIDByName("Small"))}},dismissOAuthModal:function(){return it("oauth2-authorize")}},closable:!0}})}const{BundleUpdaterManager:Bt,MMKVManager:st}=window.nativeModuleProxy;async function ve(){const e={themes:[],plugins:[]};for(const i of Object.values(m.plugins)){const n=l.pluginSettings?.[i.id];if(n?.syncPlugin===!1)continue;const r=n?.syncStorage===!1?{}:await N.createMMKVBackend(i.id).get();e.plugins.push({id:i.id,enabled:i.enabled,options:r})}for(const i of Object.values(C.themes))e.themes.push({id:i.id,enabled:i.selected});return e}let H;function ct(e){H=e}async function lt(e){if(!g.save)return;H?.(!0);const i=[...g.save.sync.plugins.filter(function(a){return!m.plugins[a.id]&&!G(a.id)&&k(a.id)&&e.unproxiedPlugins}),...g.save.sync.plugins.filter(function(a){return!m.plugins[a.id]&&G(a.id)&&k(a.id)&&e.plugins})],n=g.save.sync.themes.filter(function(a){return!C.themes[a.id]&&e.themes});if(!i[0]&&!n[0])return H?.(!1),E.showToast("Nothing to import",s.getAssetIDByName("Small"));E.showToast(`Importing ${[i.length&&`${i.length} plugin${i.length!==1?"s":""}`,n.length&&`${n.length} theme${n.length!==1?"s":""}`].filter(function(a){return!!a}).join(" and ")}`,s.getAssetIDByName("toast_image_saved"));const r={plugins:0,themes:0};await Promise.all([...i.map(function(a){return new Promise(async function(u){st.setItem(a.id,JSON.stringify(a.options)),m.installPlugin(a.id,a.enabled).then(function(){return r.plugins++}).finally(u)})}),...n.map(function(a){return new Promise(async function(u){return C.installTheme(a.id).then(function(){return r.themes++}).finally(u)})})]),E.showToast(`Imported ${[[r.plugins,"plugin"],[r.themes,"theme"]].map(function(a){let[u,S]=a;return`${u} ${S}${u!==1?"s":""}`}).join(" and ")}!`,s.getAssetIDByName("check"));const o=C.themes[n.find(function(a){return a.enabled})?.id];o&&(await N.createFileBackend("vendetta_theme.json").set(Object.assign(o,{selected:!0})),await function(){return new Promise(function(a){return J.showConfirmationAlert({title:"Theme selected",content:"A reload is required to see the theme. Do you want to reload now?",confirmText:"Reload",confirmColor:"red",onConfirm:function(){window.nativeModuleProxy.BundleUpdaterManager.reload(),a()},cancelText:"Skip",onCancel:a,isDismissable:!0})})}()),H?.(!1)}const{FormCheckboxRow:Q}=h.Forms;function be(e){let{defOptions:i}=e;const n={unproxiedPlugins:g.save.sync.plugins.filter(function(a){return!m.plugins[a.id]&&!G(a.id)&&k(a.id)}).length,plugins:g.save.sync.plugins.filter(function(a){return!m.plugins[a.id]&&G(a.id)&&k(a.id)}).length,themes:g.save.sync.themes.filter(function(a){return!C.themes[a.id]}).length},[r,o]=t.React.useState(i??{unproxiedPlugins:!1,plugins:!!n.plugins,themes:!!n.themes});return t.React.createElement(se,null,t.React.createElement(Ve,null,t.React.createElement(Ge,{title:"Import Data",trailing:t.React.createElement(ke,{onPress:function(){return ce()}})}),t.React.createElement(Q,{label:`Unproxied Plugins (${n.unproxiedPlugins})`,disabled:!n.unproxiedPlugins,onPress:function(){return n.unproxiedPlugins&&(!r.unproxiedPlugins&&!i?J.showConfirmationAlert({title:"Warning",content:"Installing unproxied plugins can be dangerous since they haven't been verified by Vendetta staff. Are you sure you want to import them?",isDismissable:!0,confirmText:"Yes",confirmColor:"brand",onConfirm:function(){return le(be,{defOptions:{...r,unproxiedPlugins:!0}})},cancelText:"Cancel"}):o({...r,unproxiedPlugins:!r.unproxiedPlugins}))},selected:r.unproxiedPlugins}),t.React.createElement(Q,{label:`Plugins (${n.plugins})`,disabled:!n.plugins,onPress:function(){return n.plugins&&o({...r,plugins:!r.plugins})},selected:r.plugins}),t.React.createElement(Q,{label:`Themes (${n.themes})`,disabled:!n.themes,onPress:function(){return n.themes&&o({...r,themes:!r.themes})},selected:r.themes}),t.React.createElement(h.Button,{text:"Import",color:"green",size:"medium",renderIcon:function(){return t.React.createElement(t.ReactNative.Image,{style:{marginRight:8},source:s.getAssetIDByName("ic_download_24px")})},onPress:function(){lt(r),ce()},style:{marginHorizontal:16,marginVertical:16},disabled:!r.unproxiedPlugins&&!r.plugins&&!r.themes})))}const we=c.findByProps("isTablet"),{View:ut}=h.General,{FormRow:dt}=h.Forms;function ft(){const[e,i]=t.React.useState({});return T()?t.React.createElement(ut,{style:{flexDirection:we.isTablet?"row":"column",justifyContent:"flex-end"}},[{text:"Save Data",onPress:async function(n){n(!0);try{g.save=await Ee(await ve()),E.showToast("Successfully synced data",s.getAssetIDByName("Check"))}catch(r){E.showToast(String(r),s.getAssetIDByName("Small"))}n(!1)}},{text:"Import Data",onPress:function(n){g.save&&(le(be,{}),ct(n))}}].map(function(n,r){const o=r!==0?8:0;return t.React.createElement(h.Button,{text:n.text,color:"green",size:"small",onPress:function(){return!e[r]&&n.onPress(function(a){i({...e,[r]:!!a})})},trailing:t.React.createElement(dt.Icon,{source:s.getAssetIDByName("Check")}),loading:e[r],style:[we.isTablet?{marginLeft:o}:{marginTop:o}]})})):t.React.createElement(F,{variant:"text-md/semibold",color:"TEXT_NORMAL",align:"center"},"Authenticate first to manage your data")}const{FormSwitchRow:me}=h.Forms;function gt(){const[e,i]=t.React.useState(""),[,n]=t.React.useReducer(function(a){return~a},0);t.React.useEffect(function(){i("")},[]),N.useProxy(l);const r=t.NavigationNative.useNavigation(),o=r.addListener("focus",function(){o(),r.setOptions({title:"Plugin Settings",headerRight:function(){return t.React.createElement(de,{onPress:function(){return J.showConfirmationAlert({title:"Revert Settings",content:"Are you sure you want to revert all plugin settings?",confirmText:"Revert",cancelText:"Cancel",confirmColor:"red",onConfirm:function(){return l.pluginSettings={}}})},icon:s.getAssetIDByName("ic_message_delete"),style:"header"})}})});return t.React.createElement(t.ReactNative.FlatList,{ListHeaderComponent:t.React.createElement(h.Search,{style:{marginBottom:10},onChangeText:function(a){return i(a.toLowerCase())}}),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:Object.entries(m.plugins).filter(function(a){return a[1].manifest.name?.toLowerCase().includes(e)}),renderItem:function(a){let{item:[u,S]}=a;l.pluginSettings??={};const d=l.pluginSettings[u]??{syncPlugin:!0,syncStorage:!0},I=function(){l.pluginSettings??={},d.syncPlugin===!0&&d.syncStorage===!0?delete l.pluginSettings[u]:l.pluginSettings[u]=d,n()};return t.React.createElement(h.Summary,{label:S.manifest.name,icon:S.manifest.vendetta.icon??":3"},t.React.createElement(me,{label:"Sync Plugin",onValueChange:function(){d.syncPlugin=!d.syncPlugin,I()},value:d.syncPlugin}),t.React.createElement(me,{label:"Sync Plugin Storage",onValueChange:function(){d.syncStorage=!d.syncStorage,I()},value:d.syncStorage}))}})}var Ie={github:{url:"https://github.com/nexpid/VendettaPlugins/"}};const{showSimpleActionSheet:yt}=c.findByProps("showSimpleActionSheet"),ht=c.findByStoreName("UserStore");function pt(){const e=$e.getDebugInfo(),i=t.ReactNative.NativeModules.InfoDictionaryManager??t.ReactNative.NativeModules.RTNClientInfoManager;return`Device: ${e.os.name==="iOS"?e.device.codename:`${e.device.brand} ${e.device.model}`}
Model: ${e.device.model}
Manufacturer: ${e.device.manufacturer}
Brand: ${e.device.brand}

OS: ${e.os.name}
Version: ${e.os.version}

Discord Branch: ${i.ReleaseChannel}
Discord Version: ${e.discord.version}
Discord Build: ${e.discord.build}
Vendetta Version: ${e.vendetta.version}

React Version: ${e.react.version}
Hermes Bytecode: ${e.hermes.bytecodeVersion}`}function Te(e){const i=ht.getCurrentUser(),n=new URLSearchParams;for(const[r,o]of Object.entries(e))n.set(r,o);return n.set("discord-username",`@${i.username}${i.discriminator!=="0"?`#${i.discriminator}`:""}`),console.log(`${Ie.github.url}issues/new?${n.toString()}`),`${Ie.github.url}issues/new?${n.toString()}`}const St=function(e){return yt({key:"CardOverflow",header:{title:"GitHub Reports"},options:[{label:"Copy bug report link",icon:s.getAssetIDByName("copy"),onPress:function(){t.clipboard.setString(Te({title:`bug(${e}): `,template:"bug_report.yml",labels:"bug",sysinfo:pt()})),E.showToast("Copied",s.getAssetIDByName("toast_copy_link"))}},{label:"Copy feature suggestion link",icon:s.getAssetIDByName("copy"),onPress:function(){t.clipboard.setString(Te({title:`suggest(${e}): `,labels:"suggestion",template:"suggestion.yml"})),E.showToast("Copied",s.getAssetIDByName("toast_copy_link"))}}]})},{ScrollView:Rt,View:Et}=h.General,{FormRow:p,FormSwitchRow:Pe}=h.Forms,Ne=c.findByStoreName("UserStore");function Z(){N.useProxy(g),N.useProxy(l);const e=t.NavigationNative.useNavigation(),i=e.addListener("focus",function(){i(),e.setOptions({headerRight:function(){return t.React.createElement(de,{icon:s.getAssetIDByName("ic_report_message"),style:"header",onPress:function(){return St("cloud-sync")}})}})});return t.React.createElement(Rt,null,t.React.createElement(j,{title:"Current Data",icon:s.getAssetIDByName("ic_contact_sync"),padding:!0},t.React.createElement(Et,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginVertical:8}},t.React.createElement(he,{count:g.save?.sync?.plugins?.length??"-",subtitle:"plugins",contents:2}),t.React.createElement(he,{count:g.save?.sync?.themes?.length??"-",subtitle:"themes",contents:2}))),t.React.createElement(j,{title:"Settings",icon:s.getAssetIDByName("ic_cog_24px")},t.React.createElement(Pe,{label:"Auto Save",subLabel:"Automatically save data to cloud",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("ic_contact_sync")}),onValueChange:function(){return l.autoSync=!l.autoSync},value:l.autoSync??!1}),!ne&&l.autoSync&&t.React.createElement(F,{variant:"text-md/semibold",color:"TEXT_DANGER",style:{marginHorizontal:20,marginVertical:2}},"You must reinstall Vendetta in order to use Auto Save!"),t.React.createElement(Pe,{label:"Pin To Settings",subLabel:"Pin Cloud Sync to the settings page",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("ic_message_pin")}),onValueChange:function(){return l.addToSettings=!l.addToSettings},value:l.addToSettings??!1}),t.React.createElement(p,{label:"Plugin Settings",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("debug")}),trailing:t.React.createElement(p.Arrow,null),onPress:function(){return e.push("VendettaCustomPage",{render:gt})}})),t.React.createElement(j,{title:"Authentication",icon:s.getAssetIDByName("lock")},T()?t.React.createElement(t.React.Fragment,null,t.React.createElement(p,{label:"Log out",subLabel:"Logs you out of CloudSync",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("ic_logout_24px")}),onPress:function(){l.auth??={},delete l.auth[Ne.getCurrentUser().id],delete g.save,E.showToast("Successfully logged out",s.getAssetIDByName("ic_logout_24px"))}}),t.React.createElement(p,{label:"Delete data",subLabel:"Deletes your CloudSync data",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("trash")}),onPress:async function(){await tt(),l.auth??={},delete l.auth[Ne.getCurrentUser().id],delete g.save,E.showToast("Successfully deleted data",s.getAssetIDByName("trash"))}})):t.React.createElement(p,{label:"Authenticate",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("copy")}),trailing:p.Arrow,onPress:ot})),t.React.createElement(j,{title:"Data Management",icon:s.getAssetIDByName("ic_message_edit"),padding:!0},t.React.createElement(ft,null),T()&&t.React.createElement(t.React.Fragment,null,t.React.createElement(ze,null),t.React.createElement(p,{label:"Copy Data as JSON",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("copy")}),onPress:function(){t.clipboard.setString(JSON.stringify(g.save??{},void 0,3)),E.showToast("Copied",s.getAssetIDByName("Check"))}}))))}let Ce=0;function vt(e){clearTimeout(Ce),Ce=setTimeout(e,1500)}const{FormRow:ee}=h.Forms;function bt(){const e=t.NavigationNative.useNavigation();return React.createElement(h.ErrorBoundary,null,React.createElement(ee,{label:"Cloud Sync",leading:React.createElement(ee.Icon,{source:s.getAssetIDByName("ic_contact_sync")}),trailing:ee.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"CloudSync",render:Z})}}))}const{FormSection:wt}=h.Forms,mt=c.findByName("getScreens"),It=c.findByName("UserSettingsOverviewWrapper",!1),Tt=t.stylesheet.createThemedStyleSheet({container:{flex:1,backgroundColor:v.semanticColors.BACKGROUND_MOBILE_PRIMARY}});function Pt(e,i,n){const r=[],o=A.after("default",It,function(a,u){o();const S=K.findInReactTree(u.props.children,function(d){return d.type&&d.type.name==="UserSettingsOverview"});r.push(A.after("render",S.type.prototype,function(d,I){let{props:{children:_}}=I;const R=[t.i18n.Messages.BILLING_SETTINGS,t.i18n.Messages.PREMIUM_SETTINGS];_=K.findInReactTree(_,function(f){return f.children[1].type===wt}).children;const y=_.findIndex(function(f){return R.includes(f?.props.label)});e()&&_.splice(y===-1?4:y,0,i({}))}))},!0);if(r.push(o),mt&&n){const a=`VENDETTA_PLUGIN_${t.lodash.snakeCase(n.key).toUpperCase()}`,u=n.page.render,S=t.React.memo(function(R){let{navigation:y}=R;const f=y.addListener("focus",function(){f(),y.setOptions(K.without(n.page,"noErrorBoundary","render"))});return t.React.createElement(t.ReactNative.View,{style:Tt.container},n.page.noErrorBoundary?t.React.createElement(u,null):t.React.createElement(h.ErrorBoundary,null,t.React.createElement(u,null)))}),d={[a]:{type:"route",title:typeof n.title=="function"?n.title:function(){return n.title},icon:n.icon,screen:{route:`VendettaPlugin${t.lodash.chain(n.key).camelCase().upperFirst().value()}`,getComponent:function(){return S}}}},I=function(R,y){const f=[...R],b=y?f?.[0]?.sections:f;if(!Array.isArray(b))return f;const $="Vendetta",O=b.find(function(x){return x?.title===$});return O&&O.settings.push(a),f},_=function(){const R=c.findByProps("useOverviewSettings"),y=c.findByProps("getSettingTitleConfig"),f=c.findByProps("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),b="getSettingSearchListItems",$="getSettingListItems",O=c.findByProps(b),x=O?b:$,De=O??c.findByProps($);if(!De||!R)return!1;r.push(A.after("useOverviewSettings",R,function(ae,V){return I(V,!1)})),r.push(A.after("getSettingTitleConfig",y,function(ae,V){return{...V,[a]:typeof n.title=="function"?n.title():n.title}})),r.push(A.after(x,De,function(ae,V){let[Dt]=ae;return[...Dt.includes(a)?[{type:"setting_search_result",ancestorRendererData:d[a],setting:a,title:typeof n.title=="function"?n.title():n.title,breadcrumbs:["Vendetta"],icon:d[a].icon}]:[],...V]}));const re=f.SETTING_RELATIONSHIPS,At=f.SETTING_RENDERER_CONFIGS;return f.SETTING_RELATIONSHIPS={...re,[a]:null},f.SETTING_RENDERER_CONFIGS={...At,...d},r.push(function(){f.SETTING_RELATIONSHIPS=re,f.SETTING_RENDERER_CONFIGS=re}),!0};(function(){const R=c.findByProps("SearchableSettingsList"),y=c.findByProps("SETTING_RENDERER_CONFIG"),f=c.findByProps("getSettingListItems");if(!f||!R||!y)return!1;r.push(A.before("type",R.SearchableSettingsList,function($){return I($,!0)})),r.push(A.after("getSettingListSearchResultItems",f,function($,O){for(const x of O)x.setting===a&&(x.breadcrumbs=["Vendetta"])}));const b=y.SETTING_RENDERER_CONFIG;return y.SETTING_RENDERER_CONFIG={...b,...d},r.push(function(){y.SETTING_RENDERER_CONFIG=b}),!0})()||_()}return function(){return r.forEach(function(a){return a()})}}function Nt(){let e=[];return e.push(Pt(function(){return l.addToSettings},function(){return React.createElement(bt,null)},{key:Be.plugin.manifest.name,icon:s.getAssetIDByName("ic_contact_sync"),title:"Cloud Sync",page:{title:"CloudSync",render:Z}})),function(){return e.forEach(function(i){return i()})}}const l=X.storage;let Ae;const g=N.wrapSync(N.createStorage({get:function(){return Ae},set:function(e){Ae=e}}));async function te(){try{g.save=await et()}catch{}}function G(e){return e.startsWith(_e.PROXY_PREFIX)}function k(e){return!e.includes("cloud-sync")}const P=async function(){if(!l.autoSync)return;const e=await ve();JSON.stringify(g.save)!==JSON.stringify(e)&&vt(async function(){return g.save=await Ee(e)})},Y=Symbol.for("vendetta.storage.emitter"),ne=!!m.plugins[Y]&&!!C.themes[Y];let ie=[];var Ct={onLoad:function(){if(T()&&te(),ne){const e={plugins:m.plugins[Y],themes:C.themes[Y]};e.plugins.on("SET",P),e.themes.on("SET",P),e.plugins.on("DEL",P),e.themes.on("DEL",P),ie.push(function(){e.plugins.off("SET",P),e.themes.off("SET",P),e.plugins.off("DEL",P),e.themes.off("DEL",P)})}ie.push(Nt()),X.storage.databaseMigrate&&delete X.storage.databaseMigrate},onUnload:function(){return ie.forEach(function(e){return e()})},settings:Z};return w.cache=g,w.canImport=k,w.default=Ct,w.emitterAvailable=ne,w.fillCache=te,w.isPluginProxied=G,w.vstorage=l,Object.defineProperty(w,"__esModule",{value:!0}),w})({},vendetta.plugin,vendetta.storage,vendetta.metro,vendetta.plugins,vendetta.themes,vendetta.ui.toasts,vendetta.ui.assets,vendetta.ui.alerts,vendetta.metro.common,vendetta.ui.components,vendetta.patcher,vendetta.ui,vendetta.utils,vendetta,vendetta.constants,vendetta.debug);
