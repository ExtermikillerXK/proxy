(function(I,F,P,u,T,C,S,s,z,t,g,L,v,H,Ae,De,Be){"use strict";const _e=u.findByStoreName("ThemeStore"),$e=u.findByProps("colors","meta"),{TextStyleSheet:xe}=u.findByProps("TextStyleSheet"),{View:A,Text:te,Pressable:Oe}=g.General,ne=u.find(function(e){return e.render?.name==="ActionSheet"}),{openLazy:Me,hideActionSheet:re}=u.findByProps("openLazy","hideActionSheet"),{ActionSheetTitleHeader:Le,ActionSheetCloseButton:Ue,ActionSheetContentContainer:Ge}=u.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer");u.findByName("Navigator"),u.findByProps("getRenderCloseButton"),u.findByProps("popModal","pushModal");function ke(e){return $e.meta.resolveSemanticColor(_e.theme,e)}function ie(e,n){ne?Me(new Promise(function(r){return r({default:e})}),"ActionSheet",n):S.showToast("You cannot open ActionSheets on this version! Update to 163+",s.getAssetIDByName("Small"))}function je(e){let{title:n,onPress:r,icon:i}=e;const o=t.stylesheet.createThemedStyleSheet({androidRipple:{color:v.semanticColors.ANDROID_RIPPLE},icon:{height:18,tintColor:v.semanticColors.HEADER_SECONDARY,opacity:.5}}),a=r?Oe:A;return t.React.createElement(a,{android_ripple:o.androidRipple,disabled:!1,accessibilityRole:"button",onPress:r,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},i&&t.React.createElement(A,{style:{marginRight:4}},t.React.createElement(t.ReactNative.Image,{style:o.icon,source:i,resizeMode:"contain"})),t.React.createElement(G,{variant:"text-sm/semibold",color:"HEADER_SECONDARY"},n))}function U(e){let{title:n,onTitlePress:r,icon:i,children:o,padding:a}=e;const l=t.stylesheet.createThemedStyleSheet({main:{backgroundColor:v.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return t.React.createElement(A,{style:{marginHorizontal:16,marginTop:16}},t.React.createElement(je,{title:n,onPress:r,icon:i}),t.React.createElement(A,{style:l.main},a?t.React.createElement(A,{style:{paddingHorizontal:16,paddingVertical:16}},o):o))}function Ve(e){let{addPadding:n}=e;const r=t.stylesheet.createThemedStyleSheet({line:{width:"100%",height:2,backgroundColor:v.semanticColors.BACKGROUND_ACCENT,borderRadius:2147483647}});return t.React.createElement(A,{style:[{marginTop:16,marginBottom:16},n&&{marginHorizontal:16}]},t.React.createElement(A,{style:r.line}))}var ae;(function(e){function n(i){let{children:o,onPress:a}=i;return t.React.createElement(G,{variant:"text-md/bold",onPress:a},o)}e.Bold=n;function r(i){let{children:o,onPress:a}=i;return t.React.createElement(te,{style:{textDecorationLine:"underline"},onPress:a},o)}e.Underline=r})(ae||(ae={}));function G(e){let{variant:n,lineClamp:r,color:i,align:o,style:a,onPress:l,getChildren:R,children:d,liveUpdate:y}=e;const[h,w]=t.React.useReducer(function(m){return~m},0);return t.React.useEffect(function(){if(!y)return;const m=new Date().setMilliseconds(1e3);let E,Ce;return Ce=setTimeout(function(){w(),E=setInterval(w,1e3)},m-Date.now()),function(){clearTimeout(Ce),clearInterval(E)}},[]),t.React.createElement(te,{style:[n?xe[n]:{},i?{color:ke(v.semanticColors[i])}:{},o?{textAlign:o}:{},a??{}],numberOfLines:r,onPress:l},R?.()??d)}function oe(e){let{onPress:n,onLongPress:r,icon:i,style:o,destructive:a}=e;const l=t.stylesheet.createThemedStyleSheet({headerStyleIcon:{width:24,height:24,marginRight:10,tintColor:v.semanticColors.HEADER_PRIMARY},cardStyleIcon:{width:22,height:22,marginLeft:5,tintColor:v.semanticColors.INTERACTIVE_NORMAL},destructiveIcon:{tintColor:v.semanticColors.TEXT_DANGER}});return t.React.createElement(t.ReactNative.TouchableOpacity,{onPress:n,onLongPress:r},t.React.createElement(t.ReactNative.Image,{style:[typeof o=="string"?o==="header"?l.headerStyleIcon:l.cardStyleIcon:o,a&&l.destructiveIcon].filter(function(R){return!!R}),source:i}))}const{View:Fe,Text:se}=g.General,{TextStyleSheet:ce}=u.findByProps("TextStyleSheet"),le=t.stylesheet.createThemedStyleSheet({count:{...ce["text-lg/bold"],color:v.semanticColors.TEXT_NORMAL,textAlign:"center"},subtitle:{...ce["text-md/medium"],color:v.semanticColors.TEXT_MUTED,textAlign:"center"}});function ue(e){let{subtitle:n,count:r,contents:i}=e;return React.createElement(Fe,{style:{alignItems:"center",justifyContent:"center",marginHorizontal:16}},React.createElement(se,{style:le.count},r),React.createElement(se,{style:le.subtitle},n))}const de="https://cloudsync.nexpid.xyz/";var D={api:de,oauth2:{clientId:"1120793656878714913",redirectURL:`${de}api/oauth2-response`}};function ze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function k(e,n,r){return fe()?k=Reflect.construct:k=function(i,o,a){var l=[null];l.push.apply(l,o);var R=Function.bind.apply(i,l),d=new R;return a&&$(d,a.prototype),d},k.apply(null,arguments)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_(e)}function Ye(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&$(e,n)}function Xe(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Je(e,n){return n&&(Ke(n)==="object"||typeof n=="function")?n:ze(e)}function $(e,n){return $=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},$(e,n)}function Ke(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function Y(e){var n=typeof Map=="function"?new Map:void 0;return Y=function(r){if(r===null||!Xe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return k(r,arguments,_(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),$(i,r)},Y(e)}function fe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function We(e){var n=fe();return function(){var r=_(e),i;if(n){var o=_(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Je(this,i)}}const ge=u.findByStoreName("UserStore");let x=function(e){Ye(r,e);var n=We(r);function r(i){He(this,r);var o;return o=n.call(this,`${i.status}: ${i.message}${i.error?` (${i.error})`:""}`),o.name=o.constructor.name,o}return r}(Y(Error));function b(){return c.auth?.[ge.getCurrentUser().id]}async function X(){const e=new Error("Unauthorized, try logging out and back in again");let n=b();if(!n)throw e;if(Date.now()>=n.expiresAt){const r=await fetch(`${D.api}api/refresh-access-token?refresh_token=${encodeURIComponent(n.refreshToken)}`);if(r.status!==200)throw new x(await r.json());n=await r.json(),c.auth??={},c.auth[ge.getCurrentUser().id]=n}return n.accessToken}async function qe(e){const n=await fetch(`${D.api}api/get-access-token?code=${encodeURIComponent(e)}`);if(n.status===200)return await n.json();throw new x(await n.json())}async function Qe(){if(!b())return;const e=await fetch(`${D.api}api/get-data`,{headers:{authorization:await X()}});if(e.status===200)return await e.json();throw new x(await e.json())}async function ye(e){if(!b())return;const n=await fetch(`${D.api}api/sync-data`,{method:"POST",headers:{authorization:await X(),"content-type":"application/json"},body:JSON.stringify(e)});if(n.status===200)return await n.json();throw new x(await n.json())}async function Ze(){if(!b())return;const e=await fetch(`${D.api}api/delete-data`,{method:"DELETE",headers:{authorization:await X()}});if(e.status===200)return await e.json();throw new x(await e.json())}const{pushModal:et,popModal:tt}=u.findByProps("pushModal","popModal"),nt=u.findByName("OAuth2AuthorizeModal"),rt=u.findByStoreName("UserStore");function it(){et({key:"oauth2-authorize",modal:{key:"oauth2-authorize",modal:nt,animation:"slide-up",shouldPersistUnderModals:!1,props:{clientId:D.oauth2.clientId,redirectUri:D.oauth2.redirectURL,scopes:["identify"],responseType:"code",permissions:0n,cancelCompletesFlow:!1,callback:async function(e){let{location:n}=e;try{const r=new URL(n).searchParams.get("code"),i=await qe(r);c.auth??={},c.auth[rt.getCurrentUser().id]=i,Q(),S.showToast("Successfully authenticated",s.getAssetIDByName("Check"))}catch(r){S.showToast(String(r),s.getAssetIDByName("Small"))}},dismissOAuthModal:function(){return tt("oauth2-authorize")}},closable:!0}})}const{BundleUpdaterManager:_t,MMKVManager:at}=window.nativeModuleProxy;async function he(){const e={themes:[],plugins:[]};for(const n of Object.values(T.plugins)){const r=c.pluginSettings?.[n.id];if(r?.syncPlugin===!1)continue;const i=r?.syncStorage===!1?{}:await P.createMMKVBackend(n.id).get();e.plugins.push({id:n.id,enabled:n.enabled,options:i})}for(const n of Object.values(C.themes))e.themes.push({id:n.id,enabled:n.selected});return e}let j;function ot(e){j=e}async function st(e){if(!f.save)return;j?.(!0);const n=[...f.save.sync.plugins.filter(function(a){return!T.plugins[a.id]&&!O(a.id)&&M(a.id)&&e.unproxiedPlugins}),...f.save.sync.plugins.filter(function(a){return!T.plugins[a.id]&&O(a.id)&&M(a.id)&&e.plugins})],r=f.save.sync.themes.filter(function(a){return!C.themes[a.id]&&e.themes});if(!n[0]&&!r[0])return j?.(!1),S.showToast("Nothing to import",s.getAssetIDByName("Small"));S.showToast(`Importing ${[n.length&&`${n.length} plugin${n.length!==1?"s":""}`,r.length&&`${r.length} theme${r.length!==1?"s":""}`].filter(function(a){return!!a}).join(" and ")}`,s.getAssetIDByName("toast_image_saved"));const i={plugins:0,themes:0};await Promise.all([...n.map(function(a){return new Promise(async function(l){at.setItem(a.id,JSON.stringify(a.options)),T.installPlugin(a.id,a.enabled).then(function(){return i.plugins++}).finally(l)})}),...r.map(function(a){return new Promise(async function(l){return C.installTheme(a.id).then(function(){return i.themes++}).finally(l)})})]),S.showToast(`Imported ${[[i.plugins,"plugin"],[i.themes,"theme"]].map(function(a){let[l,R]=a;return`${l} ${R}${l!==1?"s":""}`}).join(" and ")}!`,s.getAssetIDByName("check"));const o=C.themes[r.find(function(a){return a.enabled})?.id];o&&(await P.createFileBackend("vendetta_theme.json").set(Object.assign(o,{selected:!0})),await function(){return new Promise(function(a){return z.showConfirmationAlert({title:"Theme selected",content:"A reload is required to see the theme. Do you want to reload now?",confirmText:"Reload",confirmColor:"red",onConfirm:function(){window.nativeModuleProxy.BundleUpdaterManager.reload(),a()},cancelText:"Skip",onCancel:a,isDismissable:!0})})}()),j?.(!1)}const{FormCheckboxRow:J}=g.Forms;function pe(e){let{defOptions:n}=e;const r={unproxiedPlugins:f.save.sync.plugins.filter(function(a){return!T.plugins[a.id]&&!O(a.id)&&M(a.id)}).length,plugins:f.save.sync.plugins.filter(function(a){return!T.plugins[a.id]&&O(a.id)&&M(a.id)}).length,themes:f.save.sync.themes.filter(function(a){return!C.themes[a.id]}).length},[i,o]=t.React.useState(n??{unproxiedPlugins:!1,plugins:!!r.plugins,themes:!!r.themes});return t.React.createElement(ne,null,t.React.createElement(Ge,null,t.React.createElement(Le,{title:"Import Data",trailing:t.React.createElement(Ue,{onPress:function(){return re()}})}),t.React.createElement(J,{label:`Unproxied Plugins (${r.unproxiedPlugins})`,disabled:!r.unproxiedPlugins,onPress:function(){return r.unproxiedPlugins&&(!i.unproxiedPlugins&&!n?z.showConfirmationAlert({title:"Warning",content:"Installing unproxied plugins can be dangerous since they haven't been verified by Vendetta staff. Are you sure you want to import them?",isDismissable:!0,confirmText:"Yes",confirmColor:"brand",onConfirm:function(){return ie(pe,{defOptions:{...i,unproxiedPlugins:!0}})},cancelText:"Cancel"}):o({...i,unproxiedPlugins:!i.unproxiedPlugins}))},selected:i.unproxiedPlugins}),t.React.createElement(J,{label:`Plugins (${r.plugins})`,disabled:!r.plugins,onPress:function(){return r.plugins&&o({...i,plugins:!i.plugins})},selected:i.plugins}),t.React.createElement(J,{label:`Themes (${r.themes})`,disabled:!r.themes,onPress:function(){return r.themes&&o({...i,themes:!i.themes})},selected:i.themes}),t.React.createElement(g.Button,{text:"Import",color:"green",size:"medium",renderIcon:function(){return t.React.createElement(t.ReactNative.Image,{style:{marginRight:8},source:s.getAssetIDByName("ic_download_24px")})},onPress:function(){st(i),re()},style:{marginHorizontal:16,marginVertical:16},disabled:!i.unproxiedPlugins&&!i.plugins&&!i.themes})))}const Re=u.findByProps("isTablet"),{View:ct}=g.General,{FormRow:lt}=g.Forms;function ut(){const[e,n]=t.React.useState({});return b()?t.React.createElement(ct,{style:{flexDirection:Re.isTablet?"row":"column",justifyContent:"flex-end"}},[{text:"Save Data",onPress:async function(r){r(!0);try{f.save=await ye(await he()),S.showToast("Successfully synced data",s.getAssetIDByName("Check"))}catch(i){S.showToast(String(i),s.getAssetIDByName("Small"))}r(!1)}},{text:"Import Data",onPress:function(r){f.save&&(ie(pe,{}),ot(r))}}].map(function(r,i){const o=i!==0?8:0;return t.React.createElement(g.Button,{text:r.text,color:"green",size:"small",onPress:function(){return!e[i]&&r.onPress(function(a){n({...e,[i]:!!a})})},trailing:t.React.createElement(lt.Icon,{source:s.getAssetIDByName("Check")}),loading:e[i],style:[Re.isTablet?{marginLeft:o}:{marginTop:o}]})})):t.React.createElement(G,{variant:"text-md/semibold",color:"TEXT_NORMAL",align:"center"},"Authenticate first to manage your data")}const{FormSwitchRow:Se}=g.Forms;function dt(){const[e,n]=t.React.useState(""),[,r]=t.React.useReducer(function(a){return~a},0);t.React.useEffect(function(){n("")},[]),P.useProxy(c);const i=t.NavigationNative.useNavigation(),o=i.addListener("focus",function(){o(),i.setOptions({title:"Plugin Settings",headerRight:function(){return t.React.createElement(oe,{onPress:function(){return z.showConfirmationAlert({title:"Revert Settings",content:"Are you sure you want to revert all plugin settings?",confirmText:"Revert",cancelText:"Cancel",confirmColor:"red",onConfirm:function(){return c.pluginSettings={}}})},icon:s.getAssetIDByName("ic_message_delete"),style:"header"})}})});return t.React.createElement(t.ReactNative.FlatList,{ListHeaderComponent:t.React.createElement(g.Search,{style:{marginBottom:10},onChangeText:function(a){return n(a.toLowerCase())}}),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:Object.entries(T.plugins).filter(function(a){return a[1].manifest.name?.toLowerCase().includes(e)}),renderItem:function(a){let{item:[l,R]}=a;c.pluginSettings??={};const d=c.pluginSettings[l]??{syncPlugin:!0,syncStorage:!0},y=function(){c.pluginSettings??={},d.syncPlugin===!0&&d.syncStorage===!0?delete c.pluginSettings[l]:c.pluginSettings[l]=d,r()};return t.React.createElement(g.Summary,{label:R.manifest.name,icon:R.manifest.vendetta.icon??":3"},t.React.createElement(Se,{label:"Sync Plugin",onValueChange:function(){d.syncPlugin=!d.syncPlugin,y()},value:d.syncPlugin}),t.React.createElement(Se,{label:"Sync Plugin Storage",onValueChange:function(){d.syncStorage=!d.syncStorage,y()},value:d.syncStorage}))}})}var Ee={github:{url:"https://github.com/nexpid/VendettaPlugins/"}};const{showSimpleActionSheet:ft}=u.findByProps("showSimpleActionSheet"),gt=u.findByStoreName("UserStore");function yt(){const e=Be.getDebugInfo(),n=t.ReactNative.NativeModules.InfoDictionaryManager??t.ReactNative.NativeModules.RTNClientInfoManager;return`Device: ${e.os.name==="iOS"?e.device.codename:`${e.device.brand} ${e.device.model}`}
Model: ${e.device.model}
Manufacturer: ${e.device.manufacturer}
Brand: ${e.device.brand}

OS: ${e.os.name}
Version: ${e.os.version}

Discord Branch: ${n.ReleaseChannel}
Discord Version: ${e.discord.version}
Discord Build: ${e.discord.build}
Vendetta Version: ${e.vendetta.version}

React Version: ${e.react.version}
Hermes Bytecode: ${e.hermes.bytecodeVersion}`}function ve(e){const n=gt.getCurrentUser(),r=new URLSearchParams;for(const[i,o]of Object.entries(e))r.set(i,o);return r.set("discord-username",`@${n.username}${n.discriminator!=="0"?`#${n.discriminator}`:""}`),console.log(`${Ee.github.url}issues/new?${r.toString()}`),`${Ee.github.url}issues/new?${r.toString()}`}const ht=function(e){return ft({key:"CardOverflow",header:{title:"GitHub Reports"},options:[{label:"Copy bug report link",icon:s.getAssetIDByName("copy"),onPress:function(){t.clipboard.setString(ve({title:`bug(${e}): `,template:"bug_report.yml",labels:"bug",sysinfo:yt()})),S.showToast("Copied",s.getAssetIDByName("toast_copy_link"))}},{label:"Copy feature suggestion link",icon:s.getAssetIDByName("copy"),onPress:function(){t.clipboard.setString(ve({title:`suggest(${e}): `,labels:"suggestion",template:"suggestion.yml"})),S.showToast("Copied",s.getAssetIDByName("toast_copy_link"))}}]})},{ScrollView:pt,View:Rt}=g.General,{FormRow:p,FormSwitchRow:we}=g.Forms,me=u.findByStoreName("UserStore");function K(){P.useProxy(f),P.useProxy(c);const e=t.NavigationNative.useNavigation(),n=e.addListener("focus",function(){n(),e.setOptions({headerRight:function(){return t.React.createElement(oe,{icon:s.getAssetIDByName("ic_report_message"),style:"header",onPress:function(){return ht("cloud-sync")}})}})});return t.React.createElement(pt,null,t.React.createElement(U,{title:"Current Data",icon:s.getAssetIDByName("ic_contact_sync"),padding:!0},t.React.createElement(Rt,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginVertical:8}},t.React.createElement(ue,{count:f.save?.sync?.plugins?.length??"-",subtitle:"plugins",contents:2}),t.React.createElement(ue,{count:f.save?.sync?.themes?.length??"-",subtitle:"themes",contents:2}))),t.React.createElement(U,{title:"Settings",icon:s.getAssetIDByName("ic_cog_24px")},t.React.createElement(we,{label:"Auto Save",subLabel:"Automatically save data to cloud",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("ic_contact_sync")}),onValueChange:function(){return c.autoSync=!c.autoSync},value:c.autoSync??!1}),!Z&&c.autoSync&&t.React.createElement(G,{variant:"text-md/semibold",color:"TEXT_DANGER",style:{marginHorizontal:20,marginVertical:2}},"You must reinstall Vendetta in order to use Auto Save!"),t.React.createElement(we,{label:"Pin To Settings",subLabel:"Pin Cloud Sync to the settings page",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("ic_message_pin")}),onValueChange:function(){return c.addToSettings=!c.addToSettings},value:c.addToSettings??!1}),t.React.createElement(p,{label:"Plugin Settings",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("debug")}),trailing:t.React.createElement(p.Arrow,null),onPress:function(){return e.push("VendettaCustomPage",{render:dt})}})),t.React.createElement(U,{title:"Authentication",icon:s.getAssetIDByName("lock")},b()?t.React.createElement(t.React.Fragment,null,t.React.createElement(p,{label:"Log out",subLabel:"Logs you out of CloudSync",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("ic_logout_24px")}),onPress:function(){c.auth??={},delete c.auth[me.getCurrentUser().id],delete f.save,S.showToast("Successfully logged out",s.getAssetIDByName("ic_logout_24px"))}}),t.React.createElement(p,{label:"Delete data",subLabel:"Deletes your CloudSync data",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("trash")}),onPress:async function(){await Ze(),c.auth??={},delete c.auth[me.getCurrentUser().id],delete f.save,S.showToast("Successfully deleted data",s.getAssetIDByName("trash"))}})):t.React.createElement(p,{label:"Authenticate",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("copy")}),trailing:p.Arrow,onPress:it})),t.React.createElement(U,{title:"Data Management",icon:s.getAssetIDByName("ic_message_edit"),padding:!0},t.React.createElement(ut,null),b()&&t.React.createElement(t.React.Fragment,null,t.React.createElement(Ve,null),t.React.createElement(p,{label:"Copy Data as JSON",leading:t.React.createElement(p.Icon,{source:s.getAssetIDByName("copy")}),onPress:function(){t.clipboard.setString(JSON.stringify(f.save??{},void 0,3)),S.showToast("Copied",s.getAssetIDByName("Check"))}}))))}let Ie=0;function St(e){clearTimeout(Ie),Ie=setTimeout(e,1500)}const{FormRow:W}=g.Forms;function Et(){const e=t.NavigationNative.useNavigation();return React.createElement(g.ErrorBoundary,null,React.createElement(W,{label:"Cloud Sync",leading:React.createElement(W.Icon,{source:s.getAssetIDByName("ic_contact_sync")}),trailing:W.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"CloudSync",render:K})}}))}const{FormSection:vt}=g.Forms,wt=u.findByName("getScreens"),mt=u.findByName("UserSettingsOverviewWrapper",!1),It=u.findByName("SettingsOverviewScreen",!1);//! Changed in 194204 lol
const Tt=["SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"],bt=["SETTING_RENDERER_CONFIG"],B=u.findByProps(...Tt),q=u.findByProps(...bt),Te="getSettingTitleConfig",be="getSettingTitles",Ne=u.findByProps(Te),Nt=Ne?Te:be,Pt=Ne??u.findByProps(be),Ct=t.stylesheet.createThemedStyleSheet({container:{flex:1,backgroundColor:v.semanticColors.BACKGROUND_MOBILE_PRIMARY}});function At(e,n,r){const i=[],o=L.after("default",mt,function(a,l){o();const R=H.findInReactTree(l.props.children,function(d){return d.type&&d.type.name==="UserSettingsOverview"});i.push(L.after("render",R.type.prototype,function(d,y){let{props:{children:h}}=y;const w=[t.i18n.Messages.BILLING_SETTINGS,t.i18n.Messages.PREMIUM_SETTINGS];h=H.findInReactTree(h,function(E){return E.children[1].type===vt}).children;const m=h.findIndex(function(E){return w.includes(E?.props.label)});e()&&h.splice(m===-1?4:m,0,n({}))}))},!0);if(i.push(o),wt&&r){const a=`VENDETTA_PLUGIN_${t.lodash.snakeCase(r.key).toUpperCase()}`;i.push(L.after("default",It,function(y,h){const w=h.props.sections,m=w.findIndex(function(E){return E.title==="Vendetta"});if(w[m]&&e()){const E={...w[m]};E.settings=[...E.settings,a],w[m]=E}})),i.push(L.after(Nt,Pt,function(y,h){return{...h,[a]:typeof r.title=="function"?r.title():r.title}}));const l=r.page.render,R=t.React.memo(function(y){let{navigation:h}=y;const w=h.addListener("focus",function(){w(),h.setOptions(H.without(r.page,"noErrorBoundary","render"))});return t.React.createElement(t.ReactNative.View,{style:Ct.container},r.page.noErrorBoundary?t.React.createElement(l,null):t.React.createElement(g.ErrorBoundary,null,t.React.createElement(l,null)))}),d={[a]:{type:"route",icon:r.icon,screen:{route:`VendettaPlugin${t.lodash.chain(r.key).camelCase().upperFirst().value()}`,getComponent:function(){return R}}}};//! DEBUGGING REQUIRED!
if(B){const y=B.SETTING_RELATIONSHIPS;B.SETTING_RELATIONSHIPS={...y,[a]:null};const h=B.SETTING_RENDERER_CONFIGS;B.SETTING_RENDERER_CONFIGS={...h,...d},i.push(function(){B.SETTING_RELATIONSHIPS=y,B.SETTING_RENDERER_CONFIGS=h})}else{const y=q.SETTING_RENDERER_CONFIG;q.SETTING_RENDERER_CONFIG={...y,...d},i.push(function(){q.SETTING_RENDERER_CONFIG})}}return function(){return i.forEach(function(a){return a()})}}function Dt(){let e=[];return e.push(At(function(){return c.addToSettings},function(){return React.createElement(Et,null)},{key:Ae.plugin.manifest.name,icon:s.getAssetIDByName("ic_contact_sync"),title:"Cloud Sync",page:{title:"CloudSync",render:K}})),function(){return e.forEach(function(n){return n()})}}const c=F.storage;let Pe;const f=P.wrapSync(P.createStorage({get:function(){return Pe},set:function(e){Pe=e}}));async function Q(){try{f.save=await Qe()}catch{}}function O(e){return e.startsWith(De.PROXY_PREFIX)}function M(e){return!e.includes("cloud-sync")}const N=async function(){if(!c.autoSync)return;const e=await he();JSON.stringify(f.save)!==JSON.stringify(e)&&St(async function(){return f.save=await ye(e)})},V=Symbol.for("vendetta.storage.emitter"),Z=!!T.plugins[V]&&!!C.themes[V];let ee=[];var Bt={onLoad:function(){if(b()&&Q(),Z){const e={plugins:T.plugins[V],themes:C.themes[V]};e.plugins.on("SET",N),e.themes.on("SET",N),e.plugins.on("DEL",N),e.themes.on("DEL",N),ee.push(function(){e.plugins.off("SET",N),e.themes.off("SET",N),e.plugins.off("DEL",N),e.themes.off("DEL",N)})}ee.push(Dt()),F.storage.databaseMigrate&&delete F.storage.databaseMigrate},onUnload:function(){return ee.forEach(function(e){return e()})},settings:K};return I.cache=f,I.canImport=M,I.default=Bt,I.emitterAvailable=Z,I.fillCache=Q,I.isPluginProxied=O,I.vstorage=c,Object.defineProperty(I,"__esModule",{value:!0}),I})({},vendetta.plugin,vendetta.storage,vendetta.metro,vendetta.plugins,vendetta.themes,vendetta.ui.toasts,vendetta.ui.assets,vendetta.ui.alerts,vendetta.metro.common,vendetta.ui.components,vendetta.patcher,vendetta.ui,vendetta.utils,vendetta,vendetta.constants,vendetta.debug);
