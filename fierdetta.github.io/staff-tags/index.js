(function(A,R,t,u,r,l,M,O){"use strict";const a={OWNER:"OWNER",ADMINISTRATOR:"ADMIN",MANAGER:"MANAGER",MODERATOR:"MOD"},n={OWNER:t.ReactNative.processColor(t.chroma(l.rawColors.ORANGE_345).hex()),ADMINISTRATOR:t.ReactNative.processColor(t.chroma(l.rawColors.RED_560).hex()),MANAGER:t.ReactNative.processColor(t.chroma(l.rawColors.GREEN_345).hex()),MODERATOR:t.ReactNative.processColor(t.chroma(l.rawColors.BLUE_345).hex())},{FormSection:T,FormSwitchRow:C}=O.Forms;function S(){return M.useProxy(r.storage),React.createElement(T,{title:"Tag style"},React.createElement(C,{label:"Use top role color",value:r.storage.useRoleColor,onValueChange:function(E){r.storage.useRoleColor=E}}))}const f=R.findByName("RowManager"),G=R.findByStoreName("GuildStore"),I=R.findByStoreName("GuildMemberStore"),h=R.findByStoreName("ChannelStore"),{Permissions:o}=t.constants;let d;var v={onLoad:function(){r.storage.useRoleColor??=!1,d=u.after("generate",f.prototype,function(E,B){let[_]=E,{message:e}=B;if(_.rowType!==1)return;const{guildId:i,channelId:x,authorId:N}=e;if(!e.tagText)if(i){const s=G.getGuild(i);s.ownerId===N&&(e.tagText=a.OWNER,e.tagBackgroundColor=n.OWNER);const g=I.getMember(i,N);for(const D of e.tagText?[]:g?.roles??[]){const c=s.roles[D];if(c&&(c.permissions&o.ADMINISTRATOR?(e.tagText=a.ADMINISTRATOR,e.tagBackgroundColor=n.ADMINISTRATOR):c.permissions&(0n|o.MANAGE_GUILD|o.MANAGE_CHANNELS|o.MANAGE_ROLES|o.MANAGE_WEBHOOKS)?(e.tagText=a.MANAGER,e.tagBackgroundColor=n.MANAGER):c.permissions&(0n|o.MANAGE_MESSAGES|o.KICK_MEMBERS|o.BAN_MEMBERS)&&(e.tagText=a.MODERATOR,e.tagBackgroundColor=n.MODERATOR),e.tagText))break}e.tagText&&r.storage.useRoleColor&&g?.colorString&&(e.tagBackgroundColor=t.ReactNative.processColor(t.chroma(g.colorString).hex()))}else{const s=h.getChannel(x);s.type===3&&s.ownerId===N&&(e.tagText=a.OWNER,e.tagBackgroundColor=n.OWNER)}})},onUnload:function(){return d()},settings:S};return A.default=v,Object.defineProperty(A,"__esModule",{value:!0}),A})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.storage,vendetta.ui.components);
