(function(c,R,t,u,r,l,M,O){"use strict";const a={OWNER:"OWNER",ADMINISTRATOR:"ADMIN",MANAGER:"MANAGER",MODERATOR:"MOD"},n={OWNER:t.ReactNative.processColor(t.chroma(l.rawColors.ORANGE_345).hex()),ADMINISTRATOR:t.ReactNative.processColor(t.chroma(l.rawColors.RED_560).hex()),MANAGER:t.ReactNative.processColor(t.chroma(l.rawColors.GREEN_345).hex()),MODERATOR:t.ReactNative.processColor(t.chroma(l.rawColors.BLUE_345).hex())},{FormSection:T,FormSwitchRow:C}=O.Forms;function S(){return M.useProxy(r.storage),React.createElement(T,{title:"Tag style"},React.createElement(C,{label:"Use top role color",value:r.storage.useRoleColor,onValueChange:function(A){r.storage.useRoleColor=A}}))}const G=R.findByName("RowManager"),f=R.findByStoreName("GuildStore"),I=R.findByStoreName("GuildMemberStore"),h=R.findByStoreName("ChannelStore"),{Permissions:o}=t.constants;let d;var v={onLoad:function(){r.storage.useRoleColor??=!1,d=u.after("generate",G.prototype,function(A,B){let[_]=A,{message:e}=B;if(_.rowType!==1)return;const{guildId:E,channelId:x,authorId:i}=e;if(!e.tagText)if(E){const s=f.getGuild(E);s.ownerId===i&&(e.tagText=a.OWNER,e.tagBackgroundColor=n.OWNER);const N=I.getMember(E,i);for(const D of e.tagText?[]:N?.roles??[]){const g=s.roles[D];if(g.permissions&o.ADMINISTRATOR?(e.tagText=a.ADMINISTRATOR,e.tagBackgroundColor=n.ADMINISTRATOR):g.permissions&(0n|o.MANAGE_GUILD|o.MANAGE_CHANNELS|o.MANAGE_ROLES|o.MANAGE_WEBHOOKS)?(e.tagText=a.MANAGER,e.tagBackgroundColor=n.MANAGER):g.permissions&(0n|o.MANAGE_MESSAGES|o.KICK_MEMBERS|o.BAN_MEMBERS)&&(e.tagText=a.MODERATOR,e.tagBackgroundColor=n.MODERATOR),e.tagText)break}e.tagText&&r.storage.useRoleColor&&N?.colorString&&(e.tagBackgroundColor=t.ReactNative.processColor(t.chroma(N.colorString).hex()))}else{const s=h.getChannel(x);s.type===3&&s.ownerId===i&&(e.tagText=a.OWNER,e.tagBackgroundColor=n.OWNER)}})},onUnload:function(){return d()},settings:S};return c.default=v,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.storage,vendetta.ui.components);
