(function(c,i,l,s,y,e,m,u){"use strict";function B(a){return Object.fromEntries(Object.entries(a).sort(function(t,n){let[r]=t,[o]=n;return r.localeCompare(o)}))}function b(a){const t=B(JSON.parse(JSON.stringify(a)));for(const n in t.author)switch(n){case"id":case"username":case"usernameNormalized":case"discriminator":case"avatar":case"bot":case"system":case"publicFlags":break;default:delete t.author[n]}return t}const{ScrollView:S,Text:E,TextInput:C,Platform:N}=e.ReactNative,{OS:w}=N,O=s.findByProps("ButtonColors","ButtonLooks","ButtonSizes").default,d=e.stylesheet.createThemedStyleSheet({codeBlock:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,fontSize:12,backgroundColor:u.semanticColors.BACKGROUND_SECONDARY,color:u.semanticColors.TEXT_NORMAL,marginTop:10,borderRadius:3,padding:10}});function v(a){let{message:t}=a;const n=e.React.useMemo(function(){return JSON.stringify(b(t),null,4)},[t.id]);return e.React.createElement(e.React.Fragment,null,e.React.createElement(S,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(O,{text:"Copy Raw Data",color:"brand",size:"small",onPress:function(){e.clipboard.setString(n),m.showToast("Copied data to clipboard",l.getAssetIDByName("toast_copy_link"))}}),w=="ios"?e.React.createElement(C,{style:d.codeBlock,onChange:function(){},multiline:!0,value:n}):e.React.createElement(E,{selectable:!0,style:d.codeBlock},n)))}const p=s.findByProps("openLazy","hideActionSheet"),f=s.findByProps("push","pushLazy","pop"),P=s.findByProps("getRenderCloseButton"),{default:k,getRenderCloseButton:A}=P,L=s.findByName("Icon"),{FormRow:z}=y.Forms,_=i.before("openLazy",p,function(a){const[t,n,r]=a;n=="MessageLongPressActionSheet"&&t.then(function(o){const T=i.after("default",o,function(M,g){const[F,h]=g.props?.children?.props?.children?.props?.children,R=F?.props?.message??r?.message;if(!h||!R)return;const I=function(){return React.createElement(k,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:A(function(){return f.pop()}),render:function(){return React.createElement(v,{message:R})}}}})};g.props.children.props.children.props.children[1]=[...h,React.createElement(z,{label:"View Raw",leading:React.createElement(L,{source:l.getAssetIDByName("ic_chat_bubble_16px")}),onPress:function(){p.hideActionSheet(),f.push(I)}})],T()})})}),D=function(){return _()};return c.onUnload=D,c})({},vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.ui.components,vendetta.metro.common,vendetta.ui.toasts,vendetta.ui);
