(function(i,e,l,c,d){"use strict";const t=e.findByProps("sendBotMessage"),u=e.findByStoreName("GuildStore"),f=e.findByStoreName("GuildChannelStore"),o=e.findByStoreName("ReadStateStore"),{post:p}=e.findByProps("setRequestPatch").default,{Endpoints:h}=e.findByProps("Endpoints"),g=e.findByStoreName("UserGuildSettingsStore"),y=l.registerCommand({name:"markallasread",displayName:"markallasread",description:"read all server notifications (up to 100)",displayDescription:"read all server notifications (up to 100 at time)",options:[],applicationId:"",inputType:1,type:1,execute:async function(m,a){try{if(new Date<d.storage.timeout)return t.sendBotMessage(a.channel.id,"Please wait 10 seconds!");const n=[];return Object.values(u.getGuilds()).forEach(function(r){g.isMuted(r.id)||f.getChannels(r.id).SELECTABLE.forEach(function(s){o.hasUnread(s.channel.id)&&n.push({channel_id:s.channel.id,message_id:o.lastMessageId(s.channel.id)})})}),await p({url:h.BULK_ACK,body:{read_states:n.slice(0,100)}}),d.storage.timeout=+new Date+1e4,t.sendBotMessage(a.channel.id,"Done!")}catch(n){return c.logger.error(n),t.sendBotMessage(a.channel.id,"Failed to read all server notifications!")}}}),B=function(){return y()};return i.onUnload=B,i})({},vendetta.metro,vendetta.commands,vendetta,vendetta.plugin);
