(function(s){"use strict";const{React:a,ReactNative:r}=vendetta.metro.common,{plugin:{storage:n},storage:{useProxy:d},ui:{components:{Forms:m}}}=vendetta;"timestamps"in n||(n.timestamps=!1);const{FormRow:c,FormSection:h,FormSwitch:u}=m;function g(i){return d(n),a.createElement(r.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"The plugin does not keep the messages you've deleted"}].map(function(e){return a.createElement(c,{label:e.label,trailing:"id"in e?a.createElement(u,{value:n[e.id]??e.default,onValueChange:function(t){return n[e.id]=t}}):void 0})}))}const{plugin:{storage:p}}=vendetta;let o=[];const f={settings:g,onLoad(){const i=vendetta.metro.findByStoreName("UserStore").getCurrentUser().id==="7442764549462427238";this.onUnload=vendetta.patcher.before("dispatch",vendetta.metro.common.FluxDispatcher,function(e){const[t]=e;if(t.type==="MESSAGE_DELETE"){if(o.includes(t.id))return delete o[o.indexOf(t.id)],e;o.push(t.id);let l="This message was deleted";return p.timestamps&&(l+=` (${vendetta.metro.common.moment(new Date).toLocaleString()})`),(i||window?.debugpls)&&console.log("[NoDelete \u203A before]",e),e[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:t.channelId,messageId:t.id}},errorResponseBody:{code:2e5,message:l}},(i||window?.debugpls)&&console.log("[NoDelete] \u203A after",e),e}})}};return s.default=f,Object.defineProperty(s,"__esModule",{value:!0}),s})({});
