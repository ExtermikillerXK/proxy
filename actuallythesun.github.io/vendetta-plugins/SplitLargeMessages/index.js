(function(o,u,i,h,a,E,S,d,p){"use strict";function M(){return p.useProxy(a.storage),React.createElement(d.ErrorBoundary,null,React.createElement(i.ReactNative.ScrollView,null,React.createElement(d.Forms.FormSwitchRow,{label:"Split messages on words instead of newlines",subLabel:"Results in the lowest amount of messages",onValueChange:function(s){a.storage.splitOnWords=s,c()},value:a.storage.splitOnWords})))}let l;a.storage.splitOnWords??=!1;function v(s){return new Promise(function(r){return setTimeout(r,s)})}function _(s,r){const t=[];return a.storage.splitOnWords||t.push(s.split(`
`).reduce(function(e,n){return e.length+n.length+2>r?(t.push(e),n+`
`):e?e+n+`
`:n+`
`},"")),t.length&&!t.some(function(e){return e.length>r})?t.map(function(e){return e.trim()}):(t.length=0,t.push(s.split(" ").reduce(function(e,n){return e.length+n.length+2>r?(t.push(e),n+" "):e?e+n+" ":n+" "},"")),t.some(function(e){return e.length>r})?!1:t.map(function(e){return e.trim()}))}function c(){l?.();const s=u.findByStoreName("UserStore").getCurrentUser()?.premiumType===2?4e3:2e3;i.constants.MAX_MESSAGE_LENGTH=Number.MAX_SAFE_INTEGER,i.constants.MAX_MESSAGE_LENGTH_PREMIUM=Number.MAX_SAFE_INTEGER;const r=u.findByStoreName("ChannelStore"),t=u.findByProps("sendMessage","editMessage");l=h.instead("sendMessage",t,function(e,n){const[f,{content:m}]=e;if(m?.length<s)return n(...e);const g=_(m,s);if(!g)return S.showToast("Failed to split message",E.getAssetIDByName("Small"));const A=r.getChannel(f);(async function(){for(const N of g)await n(f,{...e[1],content:N}),await v(Math.max(A.rateLimitPerUser,1e3))})()})}var w={onLoad:c,onUnload:l,settings:M};return o.default=w,o.onLoad=c,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui.assets,vendetta.ui.toasts,vendetta.ui.components,vendetta.storage);
