(function(A,l,e,N,t,T,H,s,E){"use strict";var p={Failed:s.getAssetIDByName("Small"),Delete:s.getAssetIDByName("ic_message_delete"),Copy:s.getAssetIDByName("toast_copy_link"),Open:s.getAssetIDByName("ic_leave_stage"),Clipboard:s.getAssetIDByName("pending-alert"),Clock:s.getAssetIDByName("clock"),Forum:s.getAssetIDByName("ic_forum_channel"),Settings:{Toasts:{Settings:s.getAssetIDByName("ic_selection_checked_24px"),Failed:s.getAssetIDByName("ic_close_circle_24px")},Initial:s.getAssetIDByName("coffee"),Update:s.getAssetIDByName("discover"),Locale:s.getAssetIDByName("ic_locale_24px"),External:s.getAssetIDByName("ic_raised_hand_list"),Edit:s.getAssetIDByName("ic_edit_24px"),Reply:s.getAssetIDByName("ic_reply_24px")}},f={shadow:(a=.1)=>({shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:a,shadowRadius:4.65,elevation:8}),displayToast:(a,r)=>{e.toasts.open({content:r=="clipboard"?`Copied ${a} to clipboard.`:a,source:r=="clipboard"?p.Clipboard:p.Settings.Initial})}},v={plugin:{source:"https://github.com/acquitelol/better-chat-gestures"},author:{profile:{"Rosie<3":"https://github.com/acquitelol"}}};const{TouchableOpacity:D,View:_,Image:V,Text:w,Animated:m}=T.General,M=l.findByProps("transitionToGuild"),L=l.findByStoreName("UserStore"),G=l.findByProps("showUserProfile"),u=e.stylesheet.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...f.shadow()},image:{width:75,height:75,borderRadius:10,...f.shadow()},mainText:{opacity:.975,letterSpacing:.25},header:{color:E.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:E.semanticColors.HEADER_SECONDARY,fontSize:12.75}});var Y=({name:a,authors:r})=>{const i=e.React.useRef(new m.Value(1)).current,o=()=>m.spring(i,{toValue:1.1,duration:10,useNativeDriver:!0}).start(),n=()=>m.spring(i,{toValue:1,duration:250,useNativeDriver:!0}).start(),h=()=>G.showUserProfile({userId:L.getCurrentUser().id}),y={transform:[{scale:i}]};return e.React.createElement(e.React.Fragment,null,e.React.createElement(_,{style:u.container},e.React.createElement(D,{onPress:h,onPressIn:o,onPressOut:n},e.React.createElement(m.View,{style:y},e.React.createElement(V,{style:[u.image],source:{uri:L?.getCurrentUser()?.getAvatarURL()?.replace("webp","png")}}))),e.React.createElement(_,{style:u.textContainer},e.React.createElement(D,{onPress:()=>M.openURL(v.plugin.source)},e.React.createElement(w,{style:[u.mainText,u.header]},a)),e.React.createElement(_,{style:{flexDirection:"row"}},e.React.createElement(w,{style:[u.mainText,u.subHeader]},"A project by"),r.map((c,R,d)=>e.React.createElement(D,{onPress:()=>M.openURL(v.author.profile[c.name]??"https://github.com/")},e.React.createElement(w,{style:[u.mainText,u.subHeader,{paddingLeft:4,fontFamily:e.constants.Fonts.DISPLAY_BOLD,flexDirection:"row"}]},c.name,R<d.length-1?",":null)))))))};const{View:j,Text:k}=T.General,O=e.stylesheet.createThemedStyleSheet({text:{color:E.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:12}});var U=({label:a,children:r})=>e.React.createElement(j,{style:{marginTop:10}},e.React.createElement(k,{style:[O.text,O.optionText]},a.toUpperCase()),r);const{FormRow:g,FormSwitch:P,FormDivider:S,FormInput:W,FormText:z}=T.Forms,{ScrollView:K,View:x,Text:q}=T.General,X=l.findByProps("transitionToGuild","openURL"),b=e.stylesheet.createThemedStyleSheet({icon:{color:E.semanticColors.INTERACTIVE_NORMAL},item:{color:E.semanticColors.TEXT_MUTED,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM},container:{width:"90%",marginLeft:"5%",borderRadius:10,backgroundColor:E.semanticColors.BACKGROUND_MOBILE_SECONDARY,...f.shadow()},subheaderText:{color:E.semanticColors.HEADER_SECONDARY,textAlign:"center",margin:10,marginBottom:50,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:14},image:{width:"100%",maxWidth:350,borderRadius:10}});var J=()=>{H.useProxy(t.storage);const[a,r]=e.React.useState(t.storage.tapUsernameMention),[i,o]=e.React.useState(t.storage.reply),[n,h]=e.React.useState(t.storage.userEdit),[y,c]=e.React.useState(t.storage.delay),R=e.ReactNative.Platform.OS==="android";return e.React.createElement(K,null,e.React.createElement(Y,{name:t.manifest.name,authors:t.manifest.authors}),e.React.createElement(x,{style:{marginTop:20}},e.React.createElement(U,{label:"Preferences"},e.React.createElement(x,{style:[b.container]},e.React.createElement(g,{label:"Tap Username to Mention",subLabel:`Allows you to tap on a username to mention them instead of opening their profile.${R?"This option is disabled on Android.":""}`,onLongPress:()=>f.displayToast("By default, Discord opens a profile when tapping on a username in chat. With this, it now mentions them, like on Android.","tooltip"),leading:e.React.createElement(g.Icon,{style:b.icon,source:a?p.Forum:p.Failed}),trailing:e.React.createElement(P,{value:R?!1:a,onValueChange:()=>{R||(t.storage.tapUsernameMention=!t.storage.tapUsernameMention,r(t.storage.tapUsernameMention))}}),disabled:R}),e.React.createElement(S,null),e.React.createElement(g,{label:"Double Tap To Reply",subLabel:"Allows you to tap double tap on any messages to reply to them.",onLongPress:()=>f.displayToast("When double tapping on any messages, you can now reply to them!","tooltip"),leading:e.React.createElement(g.Icon,{style:b.icon,source:i?p.Settings.Reply:p.Failed}),trailing:e.React.createElement(P,{value:i,onValueChange:()=>{t.storage.reply=!t.storage.reply,o(t.storage.reply)}})}),e.React.createElement(S,null),e.React.createElement(g,{label:`${n?"Editing":"Replying to"} your own messages`,subLabel:`Allows you to tap double tap on any of your own messages to ${n?"reply to":"edit"} them.`,onLongPress:()=>f.displayToast(`When double tapping on any of your own messages, you can now ${n?"start an edit":"reply to them"}!`,"tooltip"),leading:e.React.createElement(g.Icon,{style:b.icon,source:n?p.Settings.Edit:p.Settings.Reply}),trailing:e.React.createElement(P,{value:n,onValueChange:()=>{t.storage.userEdit=!t.storage.userEdit,h(t.storage.userEdit)}})}),e.React.createElement(S,null),e.React.createElement(W,{value:y,onChange:d=>{t.storage.delay=d==""?300:Number(d),c(y)},placeholder:"300",title:"Maximum Delay"}),e.React.createElement(S,null),e.React.createElement(z,{style:{padding:10}},"The maximum delay between taps until the double tap event is cancelled. This is 300ms by default."))),e.React.createElement(U,{label:"Source"},e.React.createElement(x,{style:b.container},e.React.createElement(g,{label:"Source",subLabel:`Open the repository of ${t.manifest.name} externally.`,onLongPress:()=>f.displayToast(`Opens the repository of ${t.manifest.name} on GitHub in an external page to view any source code of the plugin.`,"tooltip"),leading:e.React.createElement(g.Icon,{style:b.icon,source:p.Open}),trailing:()=>e.React.createElement(g.Arrow,null),onPress:()=>X.openURL(v.plugin.source)})))),e.React.createElement(q,{style:b.subheaderText},`Build: (${t.manifest.hash.substring(0,8)})`))};const I=l.findByProps("insertText"),Q=l.findByStoreName("ChannelStore"),F=l.findByStoreName("MessageStore"),B=l.findByStoreName("UserStore"),Z=l.findByProps("sendMessage","startEditMessage"),$=l.findByProps("createPendingReply"),{MessagesHandlers:C}=l.findByProps("MessagesHandlers"),ee={unpatchGetter:null,unpatchHandlers:null,currentTapIndex:0,doubleTapState({state:a="UNKNOWN",nativeEvent:r}){const i={state:a,data:r};return a=="INCOMPLETE"&&Object.assign(i,{reason:{required:{taps:2,isAuthor:!0},received:{taps:i.data.taps,isAuthor:i.data.isAuthor}}}),t.manifest.authors.find(o=>o.id===B.getCurrentUser().id)?console.log("DoubleTapState",i):void 0},patchHandlers(a){if(a.__bcg_patched)return;a.__bcg_patched=!0;let r=Boolean(a.handleTapUsername)&&e.ReactNative.Platform.OS!=="android"&&N.instead("handleTapUsername",a,(o,n)=>{if(!t.storage.tapUsernameMention)return n.apply(this,o);const h=I.refs[0].current,{messageId:y}=o[0].nativeEvent,c=F.getMessage(h.props?.channel?.id,y);c&&I.insertText(`@${c.author.username}#${c.author.discriminator}`)}),i=Boolean(a.handleTapMessage)&&N.after("handleTapMessage",a,o=>{const{nativeEvent:n}=o[0],h=n.channelId,y=n.messageId;this.currentTapIndex++;let c=setTimeout(()=>{this.currentTapIndex=0},t.storage.delay);const R=Q.getChannel(h),d=F.getMessage(h,y);if(Object.assign(n,{taps:this.currentTapIndex,content:d?.content,authorId:d?.author?.id,isAuthor:d?.author?.id===B.getCurrentUser()?.id}),this.currentTapIndex!==2)return this.doubleTapState({state:"INCOMPLETE",nativeEvent:n});if(clearTimeout(c),n?.authorId===B.getCurrentUser()?.id){if(t.storage.userEdit){const te=n.content;Z.startEditMessage(h,y,te)}else $.createPendingReply({channel:R,message:d,shouldMention:!0});I.openSystemKeyboard();return}t.storage.reply&&($.createPendingReply({channel:R,message:d,shouldMention:!0}),I.openSystemKeyboard()),this.currentTapIndex=0,this.doubleTapState({state:"COMPLETE",nativeEvent:n})});this.unpatchHandlers=()=>{r&&r(),i&&i()}},onLoad(){t.storage.tapUsernameMention??=e.ReactNative.Platform.select({android:!1,ios:!0,default:!0}),t.storage.reply??=!0,t.storage.userEdit??=!0,t.storage.delay??=300;const a=this,r=Object.getOwnPropertyDescriptor(C.prototype,"params").get;r&&Object.defineProperty(C.prototype,"params",{configurable:!0,get(){return this&&a.patchHandlers(this),r.call(this)}}),this.unpatchGetter=()=>{r&&Object.defineProperty(C.prototype,"params",{configurable:!0,get:r})}},onUnload(){this.unpatchGetter?.(),this.unpatchHandlers?.()},settings:J};return A.default=ee,Object.defineProperty(A,"__esModule",{value:!0}),A})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui.components,vendetta.storage,vendetta.ui.assets,vendetta.ui);
