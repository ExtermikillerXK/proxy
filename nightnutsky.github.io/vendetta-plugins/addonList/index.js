(function(A,M,C,g,L,u,i,P,k,V,p){"use strict";const v=Object.freeze({ATTEMPTING:"Attempting to load Addon List plugin...",LOADED:"Addon List plugin is now active!"}),c="",W=Object.freeze({DETAILED:"detailed"}),_=Object.freeze({SEMICOL:", ",NEW_LINE:`
`}),w="\u{1F7E2}",R="\u{1F534}",b="\u{1F536}",$="\u{1F537}",H="Nothing to see here, huh...",d=Object.freeze({NAME:"detailed",DESCRIPTION:"Whether to send a list with detailed information."}),E=Object.freeze({NAME:"plugin-list",DISPLAY_NAME:"plugin list",DESCRIPTION:"Send your plugin list to the current channel"}),N=Object.freeze({NAME:"theme-list",DISPLAY_NAME:"theme list",DESCRIPTION:"Send your theme list to the current channel"}),j="https://vd-plugins.github.io/proxy/actuallythesun.github.io/vendetta-plugins/SplitLargeMessages/",F=`Your list is too long to send it! Please install the Split Large Messages plugin: ${j}`,a=Object.freeze({CONTENT:"Your list is over than 2000 characters. Are you sure?",CONFIRM:"Yes",CANCEL:"No"}),q=g.findByProps("sendMessage","receiveMessage"),B=g.findByProps("sendBotMessage"),G=g.findByStoreName("UserStore").getCurrentUser()?.premiumType===2?4e3:2e3,Y=function(e){return Object.keys(e).includes(j)},x=function(e){return e.find(function(n){return n.name===W.DETAILED})?.value??!1},f=function(e){return e.map(function(n){return n.name}).join(_.SEMICOL)},z=function(e){return e.join(_.NEW_LINE).trimEnd()},m=function(e){return z(e).length},h=async function(e,n){return await q.sendMessage(e,{content:z(n)})};async function J(e,n){const I=x(e),O=i.storage.themeListAlwaysDetailed??!1,s=n.channel.id,t=[`**My Theme List | ${Object.keys(L.themes).length} Themes**`,c];if(Object.values(L.themes).length)for(const T of Object.values(L.themes)){const{selected:o,data:S,id:D}=T,{name:r,description:y,authors:l}=S;I||O?t.push(`> **Name**: ${r}`,`> **Selected**: ${o?b:$}`,`> **Description**: ${y}`,`> **Authors**: ${f(l)}`,`> **Install**: ${D}`,c):t.push(`> ${o?b:$} **${r}** by ${f(l)}`)}else t.push(H);if(m(t)>G&&!Y(u.plugins))B.sendBotMessage(s,F);else{if(m(t)>2e3){P.alerts.showConfirmationAlert({content:a.CONTENT,confirmText:a.CONFIRM,cancelText:a.CANCEL,onConfirm:async function(){return await h(s,t)}});return}await h(s,t)}}async function K(e,n){const I=x(e),O=i.storage.pluginListAlwaysDetailed??!1,s=n.channel.id,t=[`**My Plugin List | ${Object.keys(u.plugins).length} Plugins**`,c];for(const T of Object.values(u.plugins)){const{enabled:o,manifest:S,id:D}=T,{name:r,description:y,authors:l}=S;I||O?t.push(`> **Name**: ${r}`,`> **Status**: ${o?w:R}`,`> **Description**: ${y}`,`> **Authors**: ${f(l)}`,`> **Install**: ${D}`,c):t.push(`> ${o?w:R} **${r}** by ${f(l)}`)}if(m(t)>G&&!Y(u.plugins))B.sendBotMessage(s,F);else{if(m(t)>2e3){P.alerts.showConfirmationAlert({content:a.CONTENT,confirmText:a.CONFIRM,cancelText:a.CANCEL,onConfirm:async function(){return await h(s,t)}});return}await h(s,t)}}function Q(){C.logger.info(v.ATTEMPTING);const e={options:[{name:d.NAME,displayName:d.NAME,description:d.DESCRIPTION,displayDescription:d.DESCRIPTION,type:5,required:!1}],inputType:1,type:1,applicationId:"-1"},n=[M.registerCommand({name:E.NAME,displayName:E.DISPLAY_NAME,description:E.DESCRIPTION,displayDescription:E.DESCRIPTION,execute:K,...e}),M.registerCommand({name:N.NAME,displayName:N.DISPLAY_NAME,description:N.DESCRIPTION,displayDescription:N.DESCRIPTION,execute:J,...e})];return C.logger.info(v.LOADED),n}function X(e){for(const n of e)n()}function Z(){return V.useProxy(i.storage),React.createElement(p.ErrorBoundary,null,React.createElement(k.ReactNative.ScrollView,null,React.createElement(p.Forms.FormSwitchRow,{label:"Plugin List: Always send detailed list",onValueChange:function(e){return i.storage.pluginListAlwaysDetailed=e},value:i.storage.pluginListAlwaysDetailed}),React.createElement(p.Forms.FormSwitchRow,{label:"Theme List: Always send detailed list",onValueChange:function(e){return i.storage.themeListAlwaysDetailed=e},value:i.storage.themeListAlwaysDetailed})))}let U;var ee={onLoad:function(){U=Q()},onUnload:function(){X(U)},settings:Z};return A.default=ee,Object.defineProperty(A,"__esModule",{value:!0}),A})({},vendetta.commands,vendetta,vendetta.metro,vendetta.themes,vendetta.plugins,vendetta.plugin,vendetta.ui,vendetta.metro.common,vendetta.storage,vendetta.ui.components);
